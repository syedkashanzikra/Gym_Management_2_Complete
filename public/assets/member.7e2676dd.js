import{cX as u,A as s,c as i}from"./index.46fdd451.js";const d=e=>[{label:e.$t("label.active"),value:!0},{label:e.$t("label.nSPast7Days"),value:"no-show"},{label:e.$t("label.lCPast7Days"),value:"late-cancellation"},{label:e.$t("label.blocked"),value:"blocked"}],m=(e=[])=>e==null?void 0:e.find(({name:t})=>t==="default"),o=e=>{var a;const t=(a=e==null?void 0:e.latest_invoice)==null?void 0:a.amount;return new Promise((l,r)=>{i.confirm(`I can confirm that a payment of ${t} has been received.`).then(()=>{s.post(`users/${e.id}/mark-as-paid`).then(n=>{e.payment_required=!1;const{message:c}=n;i.success(c),l(n)}).catch(n=>{i.error(n),r(n)})}).catch(n=>{r(n)})})},h=u("member",{getters:{module:e=>({name:"Members",label:e.$t("modules.members"),singular:e.$t("modules.singular.member"),plural:e.$t("modules.plural.members")}),columns:e=>[{name:"id",align:"left",label:e.$t("label.memberID"),field:"member_id_formated",style:"width: 40px",sortable:!0},{name:"name",align:"left",label:e.$t("label.name"),field:"name",style:"width: 40px",sortable:!0},{name:"email",align:"left",label:e.$t("label.email"),field:"email",style:"width: 40px",sortable:!0},{name:"phone_number",align:"left",label:e.$t("label.contact"),field:"phone_number",style:"width: 40px",sortable:!0},{name:"status",align:"center",label:e.$t("label.status"),field:"status",style:"width: 40px",sortable:!0},{name:"subscription",align:"center",label:e.$t("label.subscription"),field:"subscriptions",format:m,style:"width: 40px",sortable:!1},{name:"last_login",align:"left",label:e.$t("label.lastLogin"),field:"last_login",format:t=>t?t.date_time:null,style:"width: 40px",sortable:!0},{name:"ns_bookings_count",align:"center",label:e.$t("label.nS"),field:"ns_bookings_count",style:"width: 40px",sortable:!1,status:["no-show"]},{name:"last_ns_bookings",align:"left",label:e.$t("label.lastNS"),field:"last_ns_bookings",format:t=>t?t.schedules_at:null,style:"width: 40px",sortable:!0,status:["no-show","blocked"]},{name:"late_cancellation_count",align:"center",label:e.$t("label.lC"),field:"late_cancellation_count",style:"width: 40px",sortable:!1,status:["late-cancellation"]},{name:"last_late_cancellation",align:"left",label:e.$t("label.lastLC"),field:"last_late_cancellation",format:t=>t?t.schedules_at:null,style:"width: 40px",sortable:!0,status:["late-cancellation","blocked"]},{name:"release_at",align:"left",label:e.$t("label.releaseAt"),field:"blocked",format:t=>t?`[${t==null?void 0:t.type}] ${t==null?void 0:t.release_at}`:null,style:"width: 40px",sortable:!1,status:["blocked"]},{name:"is_active",align:"left",label:e.$t("label.active"),field:"is_active",style:"width: 40px",format:t=>t?"Yes":"No",sortable:!0},{name:"actions",align:"right",sortable:!1}],toolbar:e=>[{label:e.$t("label.trashed"),action:"request",component:"base-toggle",dense:!0,key:"deleted",checkedIcon:"delete",guard:["admins"],deleted:"all"},{title:e.$t("label.status"),action:"request",component:"base-select",dense:!0,outlined:!0,key:"status",placeholder:e.$t("placeholder.select"),optionsDense:!0,style:"width: 180px",mapOptions:!0,emitValue:!0,options:d(e),deleted:"all",prefix:e.$t("prefix.status")},{title:e.$t("label.rag"),action:"request",component:"base-select",dense:!0,outlined:!0,key:"rag",placeholder:e.$t("placeholder.rag"),optionsDense:!0,style:"width: 100px",mapOptions:!0,emitValue:!0,options:[null,"red","green","amber","white"].map(t=>({label:t?`<div class="text-center"><i class="q-icon fas fa-circle rag-${t}" style="font-size: 13px;" aria-hidden="true" role="presentation" ></i></div>`:`<div class="text-center">${e.$t("label.all")}</div>`,value:t})),optionsHtml:!0,prefix:e.$t("prefix.rag"),deleted:"all"},{tooltip:e.$t("tooltip.exportAsCsv"),icon:"fas fa-file-csv",action:"export",color:"primary",deleted:"all",type:"csv"},{icon:"fad fa-plus-circle",label:e.$t("label.addMember"),permission:"New",action:"route",params:{id:"add"},route:"Single Member",color:"primary",deleted:"all"}],actions:e=>[{label:e.$t("label.edit"),permission:"Edit",action:"route",route:"Single Member",params:t=>({id:t.id}),query:t=>({action:"edit"}),icon:"fas fa-edit",deleted:!1},{label:t=>"Collect payment",permission:"Edit",condition:t=>{var a;return((a=t==null?void 0:t.latest_invoice)==null?void 0:a.status)==="open"},action:o,icon:"fas fa-money-bill-1",deleted:!1},{label:t=>t.has_blocked?"Unblock":"Block",action:t=>e.changeBlock(t),condition:t=>["no-show","late-cancellation","blocked"].includes(t.pagination.status),icon:t=>t.has_blocked?"fas fa-circle-stop":"fas fa-ban",deleted:!1},{label:e.$t("label.delete"),permission:"Delete",action:"delete",icon:"fas fa-trash-alt",deleted:!1},{label:e.$t("label.restore"),permission:"Delete",action:"restore",icon:"fas fa-trash-undo",deleted:!0}],filters:e=>[]},actions:{get(e){return new Promise((t,a)=>{s.get("users",e).then(l=>{this.setRows(l.data),t(l)}).catch(l=>{a(l)})})},options(e){return new Promise((t,a)=>{s.get("users/options",e).then(l=>{this.setRows(l.data),t(l)}).catch(l=>{a(l)})})},store(e){return new Promise((t,a)=>{s.post("users/store",e).then(l=>{t(l)}).catch(l=>{a(l)})})},show(e){return new Promise((t,a)=>{s.get(`users/${e}`).then(l=>{t(l)}).catch(l=>{a(l)})})},shows(e){return new Promise((t,a)=>{s.post("users/list-by-ids",e).then(l=>{t(l)}).catch(l=>{a(l)})})},update(e){return new Promise((t,a)=>{s.put(`users/${e.id}`,e).then(l=>{t(l)}).catch(l=>{a(l)})})},delete(e){return new Promise((t,a)=>{s.delete(`users/${e}/destroy`).then(l=>{t(l)}).catch(l=>{a(l)})})},deleteSelected(e){return new Promise((t,a)=>{s.delete("users/destroy",{items:e}).then(l=>{t(l)}).catch(l=>{a(l)})})},restore(e){return new Promise((t,a)=>{s.post(`users/${e}/restore`).then(l=>{t(l)}).catch(l=>{a(l)})})},restoreSelected(e){return new Promise((t,a)=>{s.post("users/restore",{items:e}).then(l=>{t(l)}).catch(l=>{a(l)})})},changeActive(e){return new Promise((t,a)=>{s.post(`users/${e.id}/change-active`).then(l=>{e.is_active=!e.is_active;const{message:r}=l;i.success(r),t(l)}).catch(l=>{i.error(l),a(l)})})},changeBlock(e){return new Promise((t,a)=>{s.post(`users/${e.id}/change-block`).then(l=>{e.has_blocked=!e.has_blocked;const{message:r}=l;i.success(r),t(l)}).catch(l=>{i.error(l),a(l)})})},notes(e){return new Promise((t,a)=>{s.post(`users/${e.moduleId}/notes`,e).then(l=>{t(l)}).catch(l=>{a(l)})})},schedules(e){return new Promise((t,a)=>{s.get(`users/${e.moduleId}/schedules`,e).then(l=>{t(l)}).catch(l=>{a(l)})})},schedulesCalendar(e){return new Promise((t,a)=>{s.get(`users/${e.moduleId}/schedules-calendar`,e).then(l=>{t(l)}).catch(l=>{a(l)})})},update_parq(e){return new Promise((t,a)=>{s.post(`users/${e.id}/update-parq`,e).then(l=>{t(l)}).catch(l=>{a(l)})})},showByQrcode(e){return new Promise((t,a)=>{s.get(`users/show-by-qrcode/${e}`).then(l=>{t(l)}).catch(l=>{a(l)})})},markAsPaid:o}});export{h as u};
