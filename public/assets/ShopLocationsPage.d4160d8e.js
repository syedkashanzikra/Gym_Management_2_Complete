import{M as S,_ as D,r as n,o as i,a as p,w as e,f as o,e as m,N as Q,d as k,af as w,F as $,ag as A,K as L,I as _,j as P,h as v,t as y}from"./index.46fdd451.js";import{Q as q}from"./QToolbar.72090c76.js";import{Q as f}from"./QItemLabel.249954d1.js";import{Q as C}from"./QScrollArea.fbfd314e.js";import{Q as H}from"./QPage.701dd41d.js";import{u as g}from"./location.5cd281da.js";import{A as I}from"./AddressFields.58941de5.js";import{S as B}from"./SkeletonSinglePage.f05b1d90.js";import"./QResizeObserver.b7431853.js";import"./QScrollObserver.debb7ba9.js";import"./TouchPan.ea2c677f.js";import"./touch.3df10340.js";import"./selection.e9a8e664.js";import"./StateSelect.8267e923.js";import"./index.becf6c0c.js";import"./CitySelect.9ee53a09.js";import"./QSkeleton.a3e15f44.js";const E={components:{AddressFields:I},props:{title:String,modelValue:Object},data(){return{location:this.modelValue,loading:!1}},emits:["ok","hide"],methods:{...S(g,["store","update"]),async show(){console.func("components/shop/VariantDialog:methods.show()",arguments),this.location=this.modelValue,this.$refs.dialog.show()},hide(){console.func("components/shop/VariantDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/shop/VariantDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/shop/VariantDialog:methods.onDone()",arguments),this.loading=!0,(this.creating?this.store:this.update)(this.location).then(({data:s})=>{this.$emit("ok",s),this.hide(),this.loading=!1}).catch(s=>{this.$core.error(s),this.loading=!1})}},computed:{creating(){var t;return!((t=this.location)!=null&&t.id)}}},N={class:"col-sm-12 col-xs-12"},F=m("div",{class:"text-label"},"Location name",-1),O=m("div",{class:"text-label"}," Give this location a short name to make it easy to identify. You\u2019ll see this name in areas like orders and products. If this location offers local pickup, it will be visible to your customers at checkout and in notifications. ",-1),T={class:"col-xs-12"};function U(t,s,b,x,a,l){const u=n("base-input"),d=n("address-fields"),h=n("base-section"),r=n("base-dialog");return i(),p(r,{title:b.title,"body-class":"q-pa-none scroll",ref:"dialog",onHide:l.onDialogHide,onOk:l.onDone,"use-separator":"",persistent:"",loading:a.loading},{body:e(()=>[o(h,{flat:""},{default:e(()=>[m("div",N,[F,O,o(u,{modelValue:a.location.name,"onUpdate:modelValue":s[0]||(s[0]=c=>a.location.name=c)},null,8,["modelValue"])]),m("div",T,[o(d,{modelValue:a.location,"onUpdate:modelValue":s[1]||(s[1]=c=>a.location=c)},null,8,["modelValue"])])]),_:1})]),_:1},8,["title","onHide","onOk","loading"])}var V=D(E,[["render",U]]);const j={components:{SkeletonSinglePage:B},data(){return{loaded:!1}},methods:{...S(g,["get"]),onEdit(t){console.func("components/settings/ShopLocationsDialog:methods.onEdit()",arguments),this.$q.dialog({component:V,componentProps:{modelValue:t,title:"Update location"}})},onAdd(){console.func("components/settings/ShopLocationsDialog:methods.onAdd()",arguments),this.$q.dialog({component:V,componentProps:{modelValue:{},title:"Add location"}})}},computed:{...Q(g,["rows"])},mounted(){this.get().then(()=>{this.loaded=!0}).catch(t=>{this.$core.error(t)})}},G={key:0,class:"locations-settings"},M={class:"bg-white address-list rounded-border"};function K(t,s,b,x,a,l){const u=n("base-page-header"),d=n("base-btn"),h=n("skeleton-single-page");return i(),p(H,{padding:""},{default:e(()=>[o(u,{class:"q-mb-md",title:t.$route.meta.title,hint:"Manage the places you stock inventory, fulfill orders, and sell products.",tabs:["Locations","Taxes","Payments"],"use-route":""},null,8,["title"]),a.loaded?(i(),k("div",G,[o(q,null,{default:e(()=>[o(d,{icon:"fas fa-arrow-left",link:"",label:"Go to settings",to:{name:"Settings"}}),o(w),o(d,{class:"q-mb-md",label:"Add location",onClick:l.onAdd},null,8,["onClick"])]),_:1}),o(C,{style:{height:"calc(100vh - 300px)"}},{default:e(()=>[m("div",M,[(i(!0),k($,null,A(t.rows,(r,c)=>(i(),p(L,{class:"address-card q-py-md",key:c},{default:e(()=>[o(_,{top:"",avatar:""},{default:e(()=>[o(P,{color:"primary","text-color":"white",icon:"fas fa-location-dot"})]),_:1}),o(_,null,{default:e(()=>[o(f,null,{default:e(()=>[v(y(r.name),1)]),_:2},1024),o(f,{caption:"",lines:"2"},{default:e(()=>[v(y(r.address_label),1)]),_:2},1024)]),_:2},1024),o(_,{side:""},{default:e(()=>[o(f,null,{default:e(()=>[o(d,{dense:"",flat:"",color:"grey",onClick:Y=>l.onEdit(r),icon:"fas fa-edit"},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))])]),_:1})])):(i(),p(h,{key:1}))]),_:1})}var po=D(j,[["render",K]]);export{po as default};
