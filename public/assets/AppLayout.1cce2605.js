import{Q as q,a as D}from"./QLayout.56fe95cf.js";import{L as y}from"./LayoutHeader.07f95736.js";import{L as v}from"./LayoutDrawer.bab0b985.js";import{_,o as u,a as m,w as t,f as s,ac as P,e as n,t as f,aa as k,N as w,u as g,r as a,aD as M,M as S,ah as C,ai as L}from"./index.46fdd451.js";import{Q}from"./QInnerLoading.1459e1ed.js";import{P as x}from"./ParqForm.480a0115.js";import"./QScrollObserver.debb7ba9.js";import"./QResizeObserver.b7431853.js";import"./QToolbarTitle.cb225f03.js";import"./QToolbar.72090c76.js";import"./QBadge.942c3fbf.js";import"./shop.2753827a.js";import"./logo.d17bc7ed.js";import"./QDrawer.25599cf1.js";import"./TouchPan.ea2c677f.js";import"./touch.3df10340.js";import"./selection.e9a8e664.js";import"./QExpansionItem.fdf07114.js";import"./QItemLabel.249954d1.js";import"./QBanner.bf86e8e3.js";import"./member.7e2676dd.js";const B={props:{first_name:String,last_name:String,id:[String,Number]},computed:{name(){return this.first_name+" "+this.last_name},mId(){const e=String(this.id);return e.length<4?e.padStart(4,"0"):e}}},H={class:"text-h6 title text-uppercase"},N=n("div",{class:"logo"},[n("img",{src:"/images/logo.png"})],-1),A={class:"text-right id text-subtitle2"};function U(e,o,i,$,l,r){return u(),m(k,{flat:"",bordered:"",class:"member-card"},{default:t(()=>[s(P,null,{default:t(()=>[n("div",H,f(r.name),1),N,n("div",A,f(e.$t("membershipNumber"))+": "+f(r.mId),1)]),_:1})]),_:1})}var I=_(B,[["render",U]]);const O={components:{ParqForm:x},props:{requestParq:Boolean},data(){return{loading:!0}},emits:["ok","hide"],methods:{async show(){console.func("components/MemberDialog:methods.show()",arguments),this.$refs.dialog.show(),this.loading=!1},hide(){console.func("components/MemberDialog:methods.close()",arguments),this.$refs.dialog.hide(),this.loading=!0},onDialogHide(){console.func("components/MemberDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/MemberDialog:methods.onDone()",arguments),this.$emit("ok"),this.hide()}},computed:{...w(g,["user"])}},z={class:"col-xs-12"};function F(e,o,i,$,l,r){const d=a("parq-form"),c=a("base-section"),p=a("base-dialog");return u(),m(p,{title:e.$t("parq"),"body-class":"q-pa-none scroll","content-style":"width: 950px; max-width: 95vw",ref:"dialog",onHide:r.onDialogHide,"use-separator":"","hide-footer":"",persistent:""},{body:t(()=>[s(c,{flat:"",bordered:""},{default:t(()=>[n("div",z,[s(d,{onDone:r.onDone,"request-parq":i.requestParq,member:e.user,"onUpdate:member":o[0]||(o[0]=h=>e.user=h)},null,8,["onDone","request-parq","member"])])]),_:1})]),loading:t(()=>[s(Q,{showing:l.loading},{default:t(()=>[s(M,{size:"50px",color:"primary"})]),_:1},8,["showing"])]),_:1},8,["title","onHide"])}var R=_(O,[["render",F]]);const V={components:{LayoutHeader:y,LayoutDrawer:v,MemberCard:I},computed:{...w(g,["user","config"]),sideMenus(){var e;return[{title:this.$t("menus.dashboard"),icon:"fas fa-tachometer-alt",route:"Dashboard"},{title:this.$t("menus.messages"),icon:"fas fa-message-quote",route:"Enquiries",notification:this.user.unread_enquiries},{title:this.$t("menus.bookClass"),icon:"fas fa-calendar-circle-plus",route:"Bookable"},{title:this.$t("menus.classesBooked"),icon:"fas fa-calendar-circle-user",route:"Classes"},{title:this.$t("menus.guestPasses"),route:"Guest Passes",icon:"fas fa-user-tag"},{title:this.$t("menus.shop"),route:"Shop",icon:"fas fa-gifts",show:(e=this.config)==null?void 0:e.shop},{title:this.$t("menus.documents"),route:"Documents",icon:"fas fa-rectangle-history"},{title:this.$t("menus.billing"),route:"Billing",icon:"fas fa-credit-card"}]},menus(){return this.sideMenus.filter(e=>(e==null?void 0:e.show)!==!1)}},methods:{...S(g,["documents","currentUser"]),showParq(){console.func("layouts/AppLayout:methods.showParq()",arguments),this.$q.dialog({component:R,componentProps:{requestParq:!0}})}},mounted(){this.documents().then(e=>{e.filter(i=>!i.has_read).length&&this.$core.warning(this.$t("documentDialogMessage"),{title:this.$t("newDocument"),ok:this.$t("readNow")}).onOk(()=>{this.$router.push({name:"Documents"})})}),this.currentUser().then(()=>{this.user.request_parq?this.showParq().onOk(()=>{this.currentUser()}):this.user.request_avatar&&this.$core.warning(this.$t("avatarDialogMessage"),{title:this.$t("updatePIC"),ok:this.$t("uploadNow")}).onOk(()=>{this.$router.push({name:"My Account",query:{avatar:!0}})})})}},E={class:"card q-pa-md"};function G(e,o,i,$,l,r){const d=a("layout-header"),c=a("member-card"),p=a("layout-drawer"),h=a("router-view");return u(),m(D,{view:"hHh LpR lFr",class:"bg-main"},{default:t(()=>{var b;return[s(d,{"use-cart":(b=e.config)==null?void 0:b.shop,onUpdateLeftDrawer:o[0]||(o[0]=j=>e.$refs.layoutDrawer.toggle())},null,8,["use-cart"]),s(p,{class:"admin-side-links",ref:"layoutDrawer","side-menus":r.menus},{default:t(()=>[n("div",E,[s(c,C(L(e.user)),null,16)])]),_:1},8,["side-menus"]),s(q,null,{default:t(()=>[(u(),m(h,{key:e.$router.fullPath}))]),_:1})]}),_:1})}var he=_(V,[["render",G]]);export{he as default};
