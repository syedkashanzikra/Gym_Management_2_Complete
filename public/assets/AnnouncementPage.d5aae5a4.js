import{_ as A,aE as i,M as k,r as u,o as f,a as _,w as a,e as m,f as o,h as c,t as p,J as q}from"./index.46fdd451.js";import{Q as C}from"./QPage.701dd41d.js";import{S as D}from"./SkeletonSinglePage.f05b1d90.js";import{u as v}from"./announcement.ebcc2121.js";import"./QSkeleton.a3e15f44.js";const V={is_closed:!1},N={components:{SkeletonSinglePage:D},data(){return{default:i.exports.cloneDeep(V),announcement:i.exports.cloneDeep(V),loaded:!1,submited:!1}},methods:{...k(v,["store","show","update"]),onSubmit(n){console.func("pages/admins/announcements/AnnouncementPage:methods.onSubmit()",arguments),this.submited=!0;const t=this.creating?this.store:this.update,h=i.exports.cloneDeep(this.announcement);this.announcement.is_closed&&Object.assign(h,{open_at:null,close_at:null}),t(h).then(({data:l,message:e})=>{this.submited=!1,this.$q.notify(e),this.announcement=l,this.default=i.exports.cloneDeep(l),this.$router.push({name:"Single Announcement",params:{id:l.id},query:{action:"edit"}})}).catch(l=>{this.submited=!1,this.$core.error(l,{title:this.$t("dialog.title.error")})})},onReset(n){console.func("pages/admins/announcements/AnnouncementPage:methods.onReset()",arguments),this.loaded=!1,this.$nextTick(()=>{this.announcement=i.exports.cloneDeep(this.default),this.loaded=!0})},onCancel(n){console.func("pages/admins/announcements/AnnouncementPage:methods.onCancel()",arguments),this.$router.go(-1)}},async mounted(){this.creating?this.loaded=!0:this.show(this.id).then(n=>{this.announcement=n,this.default=i.exports.cloneDeep(n),this.loaded=!0}).catch(n=>{this.$emit("error",n)})},computed:{edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.announcement)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.announcement)!==JSON.stringify(this.default)}}},w={class:"q-gutter-md"},P={class:"col-xs-12 col-sm-4"},J={class:"col-xs-12 col-sm-4"},O={class:"col-xs-12 col-sm-4"},R={class:"col-xs-12 col-sm-12"};function U(n,t,h,l,e,d){const r=u("base-label"),b=u("base-input"),g=u("base-time-input"),y=u("base-section"),S=u("base-form"),x=u("skeleton-single-page");return f(),_(C,{padding:""},{default:a(()=>[e.loaded?(f(),_(S,{key:0,onSubmit:d.onSubmit,onCancel:d.onCancel,onReset:d.onReset,resetable:d.resetable,disable:d.disable,submited:e.submited},{default:a(()=>[m("div",w,[o(y,{flat:"",bordered:"",title:n.$t("generalInformation")},{default:a(()=>[m("div",P,[o(r,{required:""},{default:a(()=>[c(p(n.$t("date")),1)]),_:1}),o(b,{modelValue:e.announcement.date,"onUpdate:modelValue":t[0]||(t[0]=s=>e.announcement.date=s),type:"date",name:"date"},null,8,["modelValue"]),o(q,{class:"q-mt-md",dense:"",modelValue:e.announcement.is_closed,"onUpdate:modelValue":t[1]||(t[1]=s=>e.announcement.is_closed=s),label:n.$t("closeAllDay"),color:"green",name:"is_closed"},null,8,["modelValue","label"])]),m("div",J,[o(r,{required:""},{default:a(()=>[c(p(n.$t("openAt")),1)]),_:1}),o(g,{outlined:"",style:{width:"auto"},modelValue:e.announcement.open_at,"onUpdate:modelValue":t[2]||(t[2]=s=>e.announcement.open_at=s),disable:e.announcement.is_closed,name:"open_at"},null,8,["modelValue","disable"])]),m("div",O,[o(r,{required:""},{default:a(()=>[c(p(n.$t("closeAt")),1)]),_:1}),o(g,{outlined:"",style:{width:"auto"},modelValue:e.announcement.close_at,"onUpdate:modelValue":t[3]||(t[3]=s=>e.announcement.close_at=s),disable:e.announcement.is_closed,name:"close_at"},null,8,["modelValue","disable"])]),m("div",R,[o(r,{required:""},{default:a(()=>[c(p(n.$t("note")),1)]),_:1}),o(b,{type:"textarea",name:"note",modelValue:e.announcement.note,"onUpdate:modelValue":t[4]||(t[4]=s=>e.announcement.note=s)},null,8,["modelValue"])])]),_:1},8,["title"])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(f(),_(x,{key:1}))]),_:1})}var I=A(N,[["render",U]]);export{I as default};
