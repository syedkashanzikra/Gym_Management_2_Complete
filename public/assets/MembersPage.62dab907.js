import{_ as w,M as C,N as k,r as l,o as g,a as b,w as n,f as i,e as y,n as v,a5 as _,h as M,t as P,g as q,a6 as N}from"./index.46fdd451.js";import{Q as B}from"./QPage.701dd41d.js";import{u as d}from"./member.7e2676dd.js";const R={data(){return{loading:!1,loaded:!1,pagination:{sortBy:"id",descending:!0,page:1,filter:"",status:!0,rag:null,deleted:!1,rowsPerPage:15,rowsNumber:15,loaded:!1,includes:["lastUpdate.admin","lastNsBookings","lastLateCancellation"],override:["includes"]},selected:[],useMemberStore:d()}},methods:{...C(d,["get","changeActive"]),onRequest(e){console.func("admins/members/MembersPage:methods.onRequest()",arguments);const{page:a,rowsPerPage:c,sortBy:m,descending:s}=e.pagination;this.pagination=e.pagination,this.loading=!0,this.get({...e.pagination,direction:s?"desc":"asc"}).then(({meta:o})=>{this.pagination.rowsNumber=o.total,this.pagination.page=a,this.pagination.rowsPerPage=c,this.pagination.sortBy=m,this.pagination.descending=s,this.pagination.loaded=!0,this.pagination.from=o.from,this.pagination.to=o.to,this.loading=!1}).catch(o=>{this.$core.error(o,{title:this.$t("dialog.title.error")})})},async actionClicked(e,a){console.func("admins/members/MembersPage:methods.actionClicked()",arguments)},async toolbarClicked(e,a){console.func("admins/members/MembersPage:methods.toolbarClicked()",arguments)},async rowClicked(e,a){console.func("admins/members/MembersPage:methods.rowClicked()",arguments),this.$router.push({name:"Single Member",params:{id:a.id},query:{action:"edit"}})}},computed:{...k(d,["actions","rows","columns","module","toolbar","filters"]),visibleColumns(){return this.columns.filter(e=>e.status&&e.status.includes(this.pagination.status)||!e.status).map(e=>e.name)},permissions(){return[]}}};function S(e,a,c,m,s,o){const p=l("base-btn"),u=l("base-status"),f=l("base-table"),h=l("base-section");return g(),b(B,{padding:""},{default:n(()=>[i(h,{flat:"",bordered:"","no-row":""},{default:n(()=>[i(f,{store:s.useMemberStore,module:e.module,columns:e.columns,rows:e.rows,actions:e.actions,toolbar:e.toolbar,filters:e.filters,loading:s.loading,pagination:s.pagination,onRequest:o.onRequest,onActionClicked:o.actionClicked,onToolbarClicked:o.toolbarClicked,onRowClicked:o.rowClicked,"no-data-label":e.$t("members.noData"),"visible-columns":o.visibleColumns,"table-key":"members",selection:"multiple",selected:s.selected,"onUpdate:selected":a[1]||(a[1]=t=>s.selected=t)},{"body-cell-name":n(t=>[y("i",{class:v(`q-mr-sm q-icon fas fa-circle rag-${t.row.rag||"white"}`),style:{"font-size":"8px"},"aria-hidden":"true",role:"presentation"},null,2),i(p,{onClick:a[0]||(a[0]=_(()=>{},["stop"])),link:"",size:"12px",tag:"a",to:{name:"Single Member",params:{id:t.row.id},query:{action:"edit"}}},{default:n(()=>[M(P(t.value),1)]),_:2},1032,["to"])]),"body-cell-subscription":n(t=>{var r;return[t.value?(g(),b(u,{key:0,type:(r=t.value)==null?void 0:r.stripe_status},null,8,["type"])):q("",!0)]}),"body-cell-status":n(t=>[i(u,{type:t.value},null,8,["type"])]),"body-cell-is_active":n(t=>[i(N,{"onUpdate:modelValue":r=>e.changeActive(t.row),size:"sm",dense:"","model-value":t.row.is_active,color:"green"},null,8,["onUpdate:modelValue","model-value"])]),_:1},8,["store","module","columns","rows","actions","toolbar","filters","loading","pagination","onRequest","onActionClicked","onToolbarClicked","onRowClicked","no-data-label","visible-columns","selected"])]),_:1})]),_:1})}var T=w(R,[["render",S]]);export{T as default};
