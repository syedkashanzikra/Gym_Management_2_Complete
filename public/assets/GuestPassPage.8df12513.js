import{Q as y}from"./QPage.701dd41d.js";import{_ as q,aE as g,M as v,r,o as h,a as f,w as a,e as i,f as o,h as d,t as m}from"./index.46fdd451.js";import{S as N}from"./SkeletonSinglePage.f05b1d90.js";import{u as k}from"./guest-pass.449a46cc.js";import"./QSkeleton.a3e15f44.js";const b={},C={components:{SkeletonSinglePage:N},data(){return{default:g.exports.cloneDeep(b),guestPass:g.exports.cloneDeep(b),loaded:!1,submited:!1}},methods:{...v(k,["store","show","update"]),onSubmit(e){console.func("pages/guest-passes/GuestPassPage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.guestPass).then(({data:n,message:_})=>{this.submited=!1,this.$q.notify(_),this.guestPass=n,this.default=g.exports.cloneDeep(n),this.$router.push({name:"Single Guest Pass",params:{id:n.id,title:n.name},query:{action:"edit"}})}).catch(n=>{this.submited=!1,this.$core.error(n,{title:this.$t("dialog.title.error")})})},onReset(e){console.func("pages/guest-passes/GuestPassPage:methods.onReset()",arguments),this.loaded=!1,this.$nextTick(()=>{this.guestPass=g.exports.cloneDeep(this.default),this.loaded=!0})},onCancel(e){console.func("pages/guest-passes/GuestPassPage:methods.onCancel()",arguments),this.$router.go(-1)}},async mounted(){this.creating?this.loaded=!0:this.show(this.id).then(e=>{this.guestPass=e,this.default=g.exports.cloneDeep(e),this.$app.setTitle(e.name),this.loaded=!0}).catch(e=>{this.$emit("error",e)})},computed:{edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.guestPass)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.guestPass)!==JSON.stringify(this.default)}}},D={class:"q-gutter-md"},G={class:"col-xs-12 col-sm"},M={class:"col-xs-12 col-sm-5"},U={class:"col-xs-12 col-sm-5"},R={class:"col-xs-12 col-sm-4"},w={class:"col-xs-12 col-sm-4"},J={class:"col-xs-12 col-sm-12"};function O(e,t,n,_,s,p){const u=r("base-label"),P=r("base-select"),c=r("base-input"),V=r("base-section"),S=r("base-form"),x=r("skeleton-single-page");return h(),f(y,{padding:""},{default:a(()=>[s.loaded?(h(),f(S,{key:0,onSubmit:p.onSubmit,onCancel:p.onCancel,onReset:p.onReset,resetable:p.resetable,disable:p.disable,submited:s.submited},{default:a(()=>[i("div",D,[o(V,{flat:"",bordered:"",title:e.$t("guestInformation")},{default:a(()=>[i("div",G,[o(u,{required:""},{default:a(()=>[d(m(e.$t("title")),1)]),_:1}),o(P,{modelValue:s.guestPass.title,"onUpdate:modelValue":t[0]||(t[0]=l=>s.guestPass.title=l),dense:"",outlined:"",options:["Mr","Mrs","Ms","Miss","Mx","Dr","Fr","Prof"]},null,8,["modelValue"])]),i("div",M,[o(u,{required:""},{default:a(()=>[d(m(e.$t("firstName")),1)]),_:1}),o(c,{modelValue:s.guestPass.first_name,"onUpdate:modelValue":t[1]||(t[1]=l=>s.guestPass.first_name=l)},null,8,["modelValue"])]),i("div",U,[o(u,{required:""},{default:a(()=>[d(m(e.$t("surname")),1)]),_:1}),o(c,{modelValue:s.guestPass.last_name,"onUpdate:modelValue":t[2]||(t[2]=l=>s.guestPass.last_name=l)},null,8,["modelValue"])]),i("div",R,[o(u,{required:""},{default:a(()=>[d(m(e.$t("emailAddress")),1)]),_:1}),o(c,{modelValue:s.guestPass.email,"onUpdate:modelValue":t[3]||(t[3]=l=>s.guestPass.email=l)},null,8,["modelValue"])]),i("div",w,[o(u,{required:""},{default:a(()=>[d(m(e.$t("phoneNumber")),1)]),_:1}),o(c,{modelValue:s.guestPass.phone_number,"onUpdate:modelValue":t[4]||(t[4]=l=>s.guestPass.phone_number=l)},null,8,["modelValue"])]),i("div",J,[o(u,null,{default:a(()=>[d(m(e.$t("note")),1)]),_:1}),o(c,{modelValue:s.guestPass.note,"onUpdate:modelValue":t[5]||(t[5]=l=>s.guestPass.note=l),type:"textarea"},null,8,["modelValue"])])]),_:1},8,["title"])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(h(),f(x,{key:1}))]),_:1})}var E=q(C,[["render",O]]);export{E as default};
