import{Q as O}from"./QToolbarTitle.cb225f03.js";import{m as T,aB as P,aY as y,d6 as U,v as B,y as i,z as v,ar as R,db as I,D as w,s as M,N as D,_ as x,r as p,o as d,a as b,w as _,f as l,u as j,g as Q,d as S,F as $,h as A,t as K,l as V,af as Y,a4 as q,a8 as z,k as G,e as J}from"./index.46fdd451.js";import{Q as W}from"./QToolbar.72090c76.js";import{Q as X}from"./QResizeObserver.b7431853.js";import{Q as Z}from"./QBadge.942c3fbf.js";import{u as ee}from"./shop.2753827a.js";import{_ as ae}from"./logo.d17bc7ed.js";var te=T({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(a,{slots:g,emit:u}){const{proxy:{$q:c}}=M(),t=P(U,y);if(t===y)return console.error("QHeader needs to be child of QLayout"),y;const n=B(parseInt(a.heightHint,10)),o=B(!0),f=i(()=>a.reveal===!0||t.view.value.indexOf("H")>-1||c.platform.is.ios&&t.isContainer.value===!0),h=i(()=>{if(a.modelValue!==!0)return 0;if(f.value===!0)return o.value===!0?n.value:0;const e=n.value-t.scroll.value.position;return e>0?e:0}),C=i(()=>a.modelValue!==!0||f.value===!0&&o.value!==!0),L=i(()=>a.modelValue===!0&&C.value===!0&&a.reveal===!0),H=i(()=>"q-header q-layout__section--marginal "+(f.value===!0?"fixed":"absolute")+"-top"+(a.bordered===!0?" q-header--bordered":"")+(C.value===!0?" q-header--hidden":"")+(a.modelValue!==!0?" q-layout--prevent-focus":"")),N=i(()=>{const e=t.rows.value.top,r={};return e[0]==="l"&&t.left.space===!0&&(r[c.lang.rtl===!0?"right":"left"]=`${t.left.size}px`),e[2]==="r"&&t.right.space===!0&&(r[c.lang.rtl===!0?"left":"right"]=`${t.right.size}px`),r});function s(e,r){t.update("header",e,r)}function m(e,r){e.value!==r&&(e.value=r)}function E({height:e}){m(n,e),s("size",e)}function F(e){L.value===!0&&m(o,!0),u("focusin",e)}v(()=>a.modelValue,e=>{s("space",e),m(o,!0),t.animate()}),v(h,e=>{s("offset",e)}),v(()=>a.reveal,e=>{e===!1&&m(o,a.modelValue)}),v(o,e=>{t.animate(),u("reveal",e)}),v(t.scroll,e=>{a.reveal===!0&&m(o,e.direction==="up"||e.position<=a.revealOffset||e.position-e.inflectionPoint<100)});const k={};return t.instances.header=k,a.modelValue===!0&&s("size",n.value),s("space",a.modelValue),s("offset",h.value),R(()=>{t.instances.header===k&&(t.instances.header=void 0,s("size",0),s("offset",0),s("space",!1))}),()=>{const e=I(g.default,[]);return a.elevated===!0&&e.push(w("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(w(X,{debounce:0,onResize:E})),w("header",{class:H.value,style:N.value,onFocusin:F},e)}}});const oe={computed:{...D(ee,["cartTotal","cartCount"])}};function ne(a,g,u,c,t,n){const o=p("base-btn");return d(),b(o,{rounded:"",flat:"",size:"18px",icon:"fal fa-cart-shopping",to:{name:"Cart"}},{default:_(()=>[l(Z,{rounded:"",style:{padding:"4px 6px","font-weight":"bold"},floating:"",label:a.cartCount},null,8,["label"])]),_:1})}var se=x(oe,[["render",ne]]);const re={components:{ShopCart:se},props:{useCart:Boolean,usePos:Boolean,noMenu:Boolean},emits:["update-left-drawer"],methods:{onUpdateLeftDrawer(){this.$emit("update-left-drawer")},onSave(){console.func("layouts/Dashboard:methods.onSave()",arguments),window.dispatchEvent(new Event("form:save"))},onDiscard(){console.func("layouts/Dashboard:methods.onDiscard()",arguments),window.dispatchEvent(new Event("form:discard"))}},computed:{...D(j,["user","isDirt","isLoading"])}},le=J("img",{width:"120",src:ae},null,-1);function ue(a,g,u,c,t,n){const o=p("base-btn"),f=p("shop-cart"),h=p("base-current-user");return d(),b(te,{bordered:"",class:"base-header bg-white text-black"},{default:_(()=>[l(W,null,{default:_(()=>[u.noMenu?Q("",!0):(d(),b(o,{key:0,flat:"",round:"",dense:"",size:"18px",color:"primary",class:"q-mr-sm",icon:"menu","aria-label":a.$t("menu"),onClick:n.onUpdateLeftDrawer,padding:"0"},null,8,["aria-label","onClick"])),a.isDirt?(d(),S($,{key:1},[l(O,null,{default:_(()=>[A(K(a.$t("unsavedChanges")),1)]),_:1}),l(V,{"no-caps":"",onClick:n.onDiscard,label:a.$t("discard"),color:"negative",class:"q-mr-sm"},null,8,["onClick","label"]),l(V,{"no-caps":"",label:a.$t("save"),onClick:n.onSave,type:"submit",color:"primary",loading:a.isLoading},null,8,["label","onClick","loading"])],64)):(d(),S($,{key:2},[le,l(Y),q(l(o,{class:"q-mr-sm",icon:"fad fa-cart-arrow-down",to:{name:"Pos"},rounded:"",flat:"",dense:"",size:"16px"},null,512),[[z,u.usePos]]),G(a.$slots,"menus"),q(l(f,{class:"q-mr-sm",dense:""},null,512),[[z,u.useCart]]),a.user?(d(),b(h,{key:0,flat:""})):Q("",!0)],64))]),_:3})]),_:3})}var pe=x(re,[["render",ue]]);export{pe as L};
