import{_ as v,r as c,o as h,a as V,w as i,f as o,K as B,I as w,a6 as U,l as D,a5 as C,aE as x,e as t,h as f,t as y,J as T,d as k,M as q,u as $,N as H,c as A}from"./index.46fdd451.js";import{Q as I}from"./QItemLabel.249954d1.js";import{F as S}from"./FileSelector.fa33ffa8.js";import{C as O,S as E}from"./StateSelect.8267e923.js";import{C as L}from"./CitySelect.9ee53a09.js";import{B as M}from"./BaseSectionSkeleton.fd87b72d.js";const N={components:{FileSelector:S},props:{options:Array,loaded:Boolean},emits:["remove","update"],methods:{onRemove({rowIndex:l}){console.func("components/base/settings/DocumentsList:methods.onRemove()",arguments),this.$emit("remove",l)},onChange(l,{rowIndex:e}){console.func("components/base/settings/DocumentsList:methods.onChange()",arguments),this.$emit("update",{value:l,rowIndex:e})}},computed:{columns(){return[{name:"name",align:"left",label:this.$t("label.name"),field:"name"},{name:"is_active",align:"center",label:this.$t("label.active"),field:"is_active"},{name:"member",align:"center",label:this.$t("label.memberOnly"),field:"member"},{name:"actions",align:"right",label:"",field:"actions",style:"width: 30px"}]}}};function Q(l,e,n,g,m,a){const p=c("file-selector"),b=c("base-btn"),_=c("base-table");return h(),V(_,{class:"documents-list","hide-top":"","hide-pagination":"","rows-per-page-options":[0],columns:a.columns,rows:n.options,loaded:n.loaded},{"body-cell-name":i(s=>[o(B,{class:"q-pa-none"},{default:i(()=>[o(w,{avatar:""},{default:i(()=>[o(p,{mini:"",accept:"application/pdf","dialog-label":"uploadFile",hint:l.$t("hint.pdfs",{type:"document"}),"load-from-server":"",modelValue:s.row,"onUpdate:modelValue":[d=>s.row=d,d=>a.onChange(d,s)],ref:`docs-${s.rowIndex}`},null,8,["hint","modelValue","onUpdate:modelValue"])]),_:2},1024),o(w,null,{default:i(()=>[o(I,null,{default:i(()=>[o(b,{onClick:d=>l.$refs[`docs-${s.rowIndex}`].onDetails(),label:s.row.name,link:""},null,8,["onClick","label"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),"body-cell-member":i(s=>[o(U,{dense:"",modelValue:s.row.member,"onUpdate:modelValue":d=>s.row.member=d},null,8,["modelValue","onUpdate:modelValue"])]),"body-cell-is_active":i(s=>[o(U,{dense:"",modelValue:s.row.is_active,"onUpdate:modelValue":d=>s.row.is_active=d},null,8,["modelValue","onUpdate:modelValue"])]),actions:i(s=>[o(D,{onClick:C(d=>a.onRemove(s),["stop"]),size:"sm",round:"",flat:"",color:"grey",icon:"fas fa-trash-can"},null,8,["onClick"])]),_:1},8,["columns","rows","loaded"])}var R=v(N,[["render",Q]]);const P={props:{options:Array,loaded:Boolean},computed:{columns(){return[{name:"name",align:"left",label:this.$t("label.day"),field:"name"},{name:"open_at",align:"left",label:this.$t("label.openAt"),field:"open_at"},{name:"close_at",align:"left",label:this.$t("label.closeAt"),field:"close_at"}]}}};function j(l,e,n,g,m,a){const p=c("base-time-input"),b=c("base-table");return h(),V(b,{class:"opening-times","hide-top":"","hide-pagination":"","rows-per-page-options":[0],columns:a.columns,rows:n.options,loaded:n.loaded},{"body-cell-open_at":i(_=>[o(p,{modelValue:_.row.open_at,"onUpdate:modelValue":s=>_.row.open_at=s},null,8,["modelValue","onUpdate:modelValue"])]),"body-cell-close_at":i(_=>[o(p,{modelValue:_.row.close_at,"onUpdate:modelValue":s=>_.row.close_at=s},null,8,["modelValue","onUpdate:modelValue"])]),_:1},8,["columns","rows","loaded"])}var z=v(P,[["render",j]]);const F={thumbnail:null,is_active:!0,options:{}},J=l=>((Array.isArray(l.options)||!l.options)&&(l.options={}),l),K={components:{FileSelector:S},props:{modelValue:{type:Object,default:()=>F}},data(){return{banner:x.exports.cloneDeep(this.modelValue)}},emits:["ok","hide"],methods:{async show(){console.func("components/MemberDialog:methods.show()",arguments),this.banner=J(x.exports.cloneDeep(this.modelValue)),this.$refs.dialog.show()},hide(){console.func("components/MemberDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/MemberDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/MemberDialog:methods.onDone()",arguments),this.$emit("ok",this.banner),this.hide()}}},G={class:"col-xs-12 col-sm-12"},W={class:"q-gutter-md"},X={class:"col-xs-12 col-sm-4"},Y={class:"col-xs-12 col-sm-4"},Z={class:"col-xs-12 col-sm-4"},ee={class:"col-xs-12 col-sm-4"},oe={class:"col-xs-12 col-sm-4"},le={class:"col-xs-12 col-sm-12"},ne={class:"col-xs-12"},te={class:"col-xs-12"};function se(l,e,n,g,m,a){const p=c("base-label"),b=c("base-color-input"),_=c("base-input"),s=c("base-section"),d=c("file-selector"),r=c("base-dialog");return h(),V(r,{title:"Update banner","body-class":"q-pa-none scroll","content-style":"width: 950px; max-width: 95vw",ref:"dialog",onHide:a.onDialogHide,onOk:a.onDone,"use-separator":"",persistent:""},{body:i(()=>[o(s,{gutter:"md",flat:"",dense:""},{default:i(()=>[t("div",G,[t("div",W,[o(s,{flat:"",bordered:"",title:l.$t("generalInformation")},{default:i(()=>[t("div",X,[o(p,null,{default:i(()=>[f(y(l.$t("tagLine")),1)]),_:1}),o(_,{placeholder:l.$t("placeholder.bannerTitle"),modelValue:m.banner.tag_line,"onUpdate:modelValue":e[1]||(e[1]=u=>m.banner.tag_line=u),name:"tag_line"},{append:i(()=>[o(b,{borderless:"",modelValue:m.banner.options.tag_line,"onUpdate:modelValue":e[0]||(e[0]=u=>m.banner.options.tag_line=u)},null,8,["modelValue"])]),_:1},8,["placeholder","modelValue"])]),t("div",Y,[o(p,{required:""},{default:i(()=>[f(y(l.$t("titleLine1")),1)]),_:1}),o(_,{placeholder:l.$t("placeholder.bannerTag"),modelValue:m.banner.title_line_1,"onUpdate:modelValue":e[3]||(e[3]=u=>m.banner.title_line_1=u),name:"title_line_1"},{append:i(()=>[o(b,{borderless:"",modelValue:m.banner.options.title_line,"onUpdate:modelValue":e[2]||(e[2]=u=>m.banner.options.title_line=u)},null,8,["modelValue"])]),_:1},8,["placeholder","modelValue"])]),t("div",Z,[o(p,null,{default:i(()=>[f(y(l.$t("titleLine2")),1)]),_:1}),o(_,{placeholder:l.$t("placeholder.bannerTag1"),modelValue:m.banner.title_line_2,"onUpdate:modelValue":e[5]||(e[5]=u=>m.banner.title_line_2=u),name:"title_line_2"},{append:i(()=>[o(b,{borderless:"",modelValue:m.banner.options.title_line,"onUpdate:modelValue":e[4]||(e[4]=u=>m.banner.options.title_line=u)},null,8,["modelValue"])]),_:1},8,["placeholder","modelValue"])]),t("div",ee,[o(p,null,{default:i(()=>[f(y(l.$t("button")),1)]),_:1}),o(_,{placeholder:l.$t("placeholder.bannerBtn"),modelValue:m.banner.button,"onUpdate:modelValue":e[7]||(e[7]=u=>m.banner.button=u),name:"button"},{append:i(()=>[o(b,{borderless:"",modelValue:m.banner.options.button,"onUpdate:modelValue":e[6]||(e[6]=u=>m.banner.options.button=u)},null,8,["modelValue"])]),_:1},8,["placeholder","modelValue"])]),t("div",oe,[o(p,null,{default:i(()=>[f(y(l.$t("link")),1)]),_:1}),o(_,{placeholder:"https://",modelValue:m.banner.link,"onUpdate:modelValue":e[8]||(e[8]=u=>m.banner.link=u),type:"url",name:"link"},null,8,["modelValue"])])]),_:1},8,["title"])])]),t("div",le,[o(s,{flat:"",bordered:"",title:l.$t("thumbnail")},{default:i(()=>[t("div",ne,[o(d,{accept:"image/*","dialog-label":"uploadThumbnail",hint:l.$t("hint.images",{type:"thumbnail"}),"load-from-server":"",modelValue:m.banner.thumbnail,"onUpdate:modelValue":e[9]||(e[9]=u=>m.banner.thumbnail=u),query:u=>({...u,type:"image"})},null,8,["hint","modelValue","query"])]),t("div",te,[o(T,{dense:"",modelValue:m.banner.is_active,"onUpdate:modelValue":e[10]||(e[10]=u=>m.banner.is_active=u),label:l.$t("active")},null,8,["modelValue","label"])])]),_:1},8,["title"])])]),_:1})]),_:1},8,["onHide","onOk"])}var ae=v(K,[["render",se]]);const ie={props:{options:Array,loaded:Boolean},emits:["remove","update"],methods:{async rowClicked({rowIndex:l,row:e}){console.func("components/base/settings/HomeBanner:methods.rowClicked()",arguments),this.$q.dialog({component:ae,componentProps:{modelValue:e}}).onOk(n=>{this.$emit("update",{value:n,rowIndex:l})})},onRemove({rowIndex:l}){console.func("components/base/settings/HomeBanner:methods.onRemove()",arguments),this.$emit("remove",l)},onChange(l,{rowIndex:e}){console.func("components/base/settings/HomeBanner:methods.onChange()",arguments),this.$emit("update",{value:l,rowIndex:e})}},computed:{columns(){return[{name:"title",align:"left",label:this.$t("label.title"),field:"title_line_1"},{name:"is_active",align:"center",label:this.$t("label.active"),field:"is_active"},{name:"actions",align:"right",sortable:!1}]}}};function de(l,e,n,g,m,a){const p=c("base-thumbnail"),b=c("base-btn"),_=c("base-table");return h(),V(_,{class:"home-banners","hide-top":"","hide-pagination":"","rows-per-page-options":[0],columns:a.columns,rows:n.options,loaded:n.loaded},{"body-cell-title":i(s=>[o(B,{class:"q-pa-none",dense:""},{default:i(()=>[o(w,{avatar:""},{default:i(()=>[o(p,{size:40,media:s.row.thumbnail},null,8,["media"])]),_:2},1024),o(w,{avatar:""},{default:i(()=>[o(b,{onClick:C(d=>a.rowClicked(s),["stop"]),link:""},{default:i(()=>[f(y(s.value),1)]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),"body-cell-is_active":i(s=>[o(U,{dense:"",modelValue:s.row.is_active,"onUpdate:modelValue":d=>s.row.is_active=d},null,8,["modelValue","onUpdate:modelValue"])]),actions:i(s=>[o(D,{onClick:C(d=>a.rowClicked(s),["stop"]),size:"sm",round:"",flat:"",color:"grey",icon:"fas fa-edit"},null,8,["onClick"]),o(D,{onClick:C(d=>a.onRemove(s),["stop"]),size:"sm",round:"",flat:"",color:"grey",icon:"fas fa-trash-can"},null,8,["onClick"])]),_:1},8,["columns","rows","loaded"])}var me=v(ie,[["render",de]]);const ce={components:{CountrySelect:O,StateSelect:E,CitySelect:L,BaseSectionSkeleton:M},props:{options:Object,loaded:Boolean},emits:["update"],methods:{onChange(l,e){console.func("components/settings/BillingInformation:methods.onChange()",arguments);const n=this.options;n[e]=l,this.$emit("update",n)}}},re={class:"billing-information q-pb-md"},ue={key:0,class:"q-pt-md row q-col-gutter-md"},pe={class:"col-sm-6 col-xs-12"},_e=t("div",{class:"text-label"},"Legal business name",-1),be={class:"col-xs-12"},he={class:"row q-col-gutter-md"},ge={class:"col-xs-12 col-sm-6"},fe=t("div",{class:"text-label"},"Address line 1",-1),ve={class:"col-xs-12 col-sm-6"},Ve=t("div",{class:"text-label"},"Address line 2",-1),ye={class:"col-sm-12"},Ce=t("div",{class:"text-label"},"Country/region",-1),we={class:"col-xs-12 col-sm-4"},xe=t("div",{class:"text-label"},"City",-1),ke={class:"col-xs-12 col-sm-4"},Ue=t("div",{class:"text-label"},"State",-1),De={class:"col-xs-12 col-sm-4"},$e=t("div",{class:"text-label"},"Postal code",-1);function Be(l,e,n,g,m,a){const p=c("base-input"),b=c("country-select"),_=c("city-select"),s=c("state-select"),d=c("base-section-skeleton");return h(),k("div",re,[n.loaded?(h(),k("div",ue,[t("div",pe,[_e,o(p,{"onUpdate:modelValue":e[0]||(e[0]=r=>a.onChange(r,"company")),"model-value":n.options.company},null,8,["model-value"])]),t("div",be,[t("div",he,[t("div",ge,[fe,o(p,{"onUpdate:modelValue":e[1]||(e[1]=r=>a.onChange(r,"line1")),"model-value":n.options.line1},null,8,["model-value"])]),t("div",ve,[Ve,o(p,{"onUpdate:modelValue":e[2]||(e[2]=r=>a.onChange(r,"line2")),"model-value":n.options.line2},null,8,["model-value"])])])]),t("div",ye,[Ce,o(b,{"onUpdate:modelValue":e[3]||(e[3]=r=>a.onChange(r,"country")),"model-value":n.options.country,onComplete:e[4]||(e[4]=r=>a.onChange(r==null?void 0:r.iso2,"country_code"))},null,8,["model-value"])]),t("div",we,[xe,o(_,{"onUpdate:modelValue":e[5]||(e[5]=r=>a.onChange(r,"city")),"model-value":n.options.city,state:n.options.state},null,8,["model-value","state"])]),t("div",ke,[Ue,o(s,{"onUpdate:modelValue":e[6]||(e[6]=r=>a.onChange(r,"state")),"model-value":n.options.state,country:n.options.country,onComplete:e[7]||(e[7]=r=>a.onChange(r==null?void 0:r.state_code,"state_code"))},null,8,["model-value","country"])]),t("div",De,[$e,o(p,{"onUpdate:modelValue":e[8]||(e[8]=r=>a.onChange(r,"postal_code")),"model-value":n.options.postal_code},null,8,["model-value"])])])):(h(),V(d,{key:1}))])}var Se=v(ce,[["render",Be]]);const Me={props:{mailConfig:Object},data(){return{toEmail:null}},emits:["ok","hide"],methods:{...q($,["testMailConfig"]),async show(){var l;console.func("components/settings/TestMailDialog:methods.show()",arguments),this.toEmail=(l=this.config)==null?void 0:l.email,this.$refs.dialog.show()},hide(){console.func("components/settings/TestMailDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/settings/TestMailDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/settings/TestMailDialog:methods.onDone()",arguments),this.testMailConfig({...this.mailConfig,to:this.toEmail}).then(({message:l})=>{this.$core.success(l),this.$emit("ok"),this.hide()}).catch(l=>{this.$core.error(l)})}},computed:{...H($,["config"])}};function Te(l,e,n,g,m,a){const p=c("base-label"),b=c("base-input"),_=c("base-section"),s=c("base-dialog");return h(),V(s,{title:"Send Test Email","body-class":"q-pa-none scroll","content-style":"width: 450px; max-width: 95vw",ref:"dialog",onHide:a.onDialogHide,onOk:a.onDone,"use-separator":"",persistent:"","done-label":"Send"},{body:i(()=>[o(_,{"no-row":"",flat:"",dense:""},{default:i(()=>[o(p,null,{default:i(()=>[f("Sent to")]),_:1}),o(b,{modelValue:m.toEmail,"onUpdate:modelValue":e[0]||(e[0]=d=>m.toEmail=d)},null,8,["modelValue"])]),_:1})]),_:1},8,["onHide","onOk"])}var qe=v(Me,[["render",Te]]);const He={components:{BaseSectionSkeleton:M},props:{options:Object,loaded:Boolean},emits:["update"],methods:{onChange(l,e){console.func("components/settings/BillingInformation:methods.onChange()",arguments);const n=this.options;n[e]=l,this.$emit("update",n)},onTestMail(){console.func("components/settings/BillingInformation:methods.onTestMail()",arguments),this.$q.dialog({component:qe,componentProps:{mailConfig:this.options}})}}},Ae={class:"mail-config q-pb-md"},Ie={key:0,class:"q-pt-md row q-col-gutter-md"},Oe={class:"col-sm-3 col-xs-12"},Ee=t("div",{class:"text-label"},"Email Send Method",-1),Le={class:"col-sm-3 col-xs-12"},Ne=t("div",{class:"text-label"},"Host",-1),Qe={class:"col-sm-3 col-xs-12"},Re=t("div",{class:"text-label"},"Port",-1),Pe={class:"col-sm-3 col-xs-12"},je=t("div",{class:"text-label"},"Encryption",-1),ze={class:"col-sm-3 col-xs-12"},Fe=t("div",{class:"text-label"},"Username",-1),Je={class:"col-sm-3 col-xs-12"},Ke=t("div",{class:"text-label"},"Password",-1),Ge={class:"col-sm-12 col-xs-12 self-end"};function We(l,e,n,g,m,a){const p=c("base-select"),b=c("base-input"),_=c("base-btn"),s=c("base-section-skeleton");return h(),k("div",Ae,[n.loaded?(h(),k("div",Ie,[t("div",Oe,[Ee,o(p,{"onUpdate:modelValue":e[0]||(e[0]=d=>a.onChange(d,"default")),readonly:"","model-value":n.options.default,"map-options":"","emit-value":"",dense:"",outlined:"",options:[{label:"SMTP",value:"smtp"}]},null,8,["model-value"])]),t("div",Le,[Ne,o(b,{"onUpdate:modelValue":e[1]||(e[1]=d=>a.onChange(d,"mailers.smtp.host")),placeholder:"e.g. smtp.googlemail.com","model-value":n.options["mailers.smtp.host"]},null,8,["model-value"])]),t("div",Qe,[Re,o(b,{"onUpdate:modelValue":e[2]||(e[2]=d=>a.onChange(d,"mailers.smtp.port")),placeholder:"578","model-value":n.options["mailers.smtp.port"]},null,8,["model-value"])]),t("div",Pe,[je,o(p,{"onUpdate:modelValue":e[3]||(e[3]=d=>a.onChange(d,"mailers.smtp.encryption")),"model-value":n.options["mailers.smtp.encryption"],"map-options":"","emit-value":"",options:[{label:"SSL",value:"ssl"},{label:"TLS",value:"tls"},{label:"None",value:null}],dense:"",outlined:""},null,8,["model-value"])]),t("div",ze,[Fe,o(b,{"onUpdate:modelValue":e[4]||(e[4]=d=>a.onChange(d,"mailers.smtp.username")),"model-value":n.options["mailers.smtp.username"],placeholder:"Normally your email address"},null,8,["model-value"])]),t("div",Je,[Ke,o(b,{"onUpdate:modelValue":e[5]||(e[5]=d=>a.onChange(d,"mailers.smtp.password")),"model-value":n.options["mailers.smtp.password"],placeholder:"Normally your email password"},null,8,["model-value"])]),t("div",Ge,[o(_,{onClick:a.onTestMail,label:"Test Mail"},null,8,["onClick"])])])):(h(),V(s,{key:1}))])}var Xe=v(He,[["render",We]]);const to={components:{DocumentsList:R,OpeningTimes:z,HomeBanners:me,BillingInformation:Se,MailConfig:Xe}},so={methods:{getTotal(l,e=!0){const n=x.exports.sumBy(x.exports.cloneDeep(this.rows),g=>g[l]?parseFloat(g[l]):0);return e?A.money(n):n}}};export{to as S,so as u};
