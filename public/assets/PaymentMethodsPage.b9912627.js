import{Q as E}from"./QToolbar.72090c76.js";import{Q as L}from"./QScrollArea.fbfd314e.js";import{Q as A}from"./QPage.701dd41d.js";import{M,_ as D,r as d,o,a as r,w as n,f as e,d as u,F as V,e as c,h,t as y,g as f,ag as U,J as Q,I as w,Q as B,a5 as T,K as H,N as I,aF as N}from"./index.46fdd451.js";import{u as S}from"./payment-method.96e05062.js";import{S as F}from"./SkeletonSinglePage.f05b1d90.js";import{Q as g}from"./QItemLabel.249954d1.js";import"./QResizeObserver.b7431853.js";import"./QScrollObserver.debb7ba9.js";import"./TouchPan.ea2c677f.js";import"./touch.3df10340.js";import"./selection.e9a8e664.js";import"./QSkeleton.a3e15f44.js";const O={props:{title:String,modelValue:Object},data(){return{payment:this.modelValue,loading:!1}},emits:["ok","hide"],methods:{...M(S,["update"]),async show(){console.func("components/shop/VariantDialog:methods.show()",arguments),this.payment=this.modelValue,this.$refs.dialog.show()},hide(){console.func("components/shop/VariantDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/shop/VariantDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/shop/VariantDialog:methods.onDone()",arguments),this.loading=!0,this.update(this.payment).then(({data:t})=>{this.$emit("ok",t),this.hide(),this.loading=!1}).catch(t=>{this.$core.error(t),this.loading=!1})}},computed:{creating(){var t;return!((t=this.payment)!=null&&t.id)},manual(){return this.payment.provider=="manual"}}},R={class:"col-xs-12"},$={class:"col-xs-12"},j={class:"col-xs-12"},z={class:""},G={key:0,class:"q-mt-sm"},J=["href"],K={key:0,class:"col-xs-12"},W={class:"col-xs-12"},X={class:"row q-col-gutter-sm"},Y={class:"col-xs-12"},Z={key:0,class:"col-xs-12"};function ee(t,l,a,P,s,p){const m=d("base-label"),_=d("base-input"),b=d("base-btn"),x=d("base-section"),k=d("base-dialog");return o(),r(k,{title:a.title,"body-class":"q-pa-none scroll",ref:"dialog",onHide:p.onDialogHide,onOk:p.onDone,"use-separator":"",persistent:"",loading:s.loading},{body:n(()=>[e(x,{flat:""},{default:n(()=>{var v;return[p.manual?(o(),u(V,{key:0},[c("div",R,[e(m,null,{default:n(()=>[h("Additional details")]),_:1}),e(_,{type:"textarea",hint:"Displays to customers when they\u2019re choosing a payment method."})]),c("div",$,[e(m,null,{default:n(()=>[h("Payment instructions")]),_:1}),e(_,{type:"textarea",hint:"Displays to customers after they place an order with this payment method."})])],64)):(o(),u(V,{key:1},[c("div",j,[e(m,null,{default:n(()=>[h("About "+y(s.payment.name),1)]),_:1}),c("div",z,y(s.payment.description),1),s.payment.link?(o(),u("div",G,[h(" Learn more about "),c("a",{href:s.payment.link,target:"_blank",rel:"noopener noreferrer"},y(s.payment.name),9,J)])):f("",!0)]),(o(!0),u(V,null,U((v=s.payment)==null?void 0:v.credentials,(i,q)=>(o(),u("div",{class:"col-xs-12",key:q},[e(m,null,{default:n(()=>[h(y(i.label),1)]),_:2},1024),e(_,{modelValue:i.value,"onUpdate:modelValue":C=>i.value=C},null,8,["modelValue","onUpdate:modelValue"])]))),128)),s.payment.webhook?(o(),u("div",K,[e(m,null,{default:n(()=>[h("Webhook Endpoint")]),_:1}),e(_,{modelValue:s.payment.webhook,"onUpdate:modelValue":l[1]||(l[1]=i=>s.payment.webhook=i),readonly:""},{append:n(()=>[e(b,{onClick:l[0]||(l[0]=i=>t.$core.copyToClipboard(s.payment.webhook)),dense:"",flat:"",icon:"fas fa-clipboard"})]),_:1},8,["modelValue"])])):f("",!0)],64)),c("div",W,[c("div",X,[c("div",Y,[e(Q,{dense:"",modelValue:s.payment.active,"onUpdate:modelValue":l[2]||(l[2]=i=>s.payment.active=i),label:"Active"},null,8,["modelValue"])]),p.manual?f("",!0):(o(),u("div",Z,[e(Q,{dense:"",modelValue:s.payment.test_mode,"onUpdate:modelValue":l[3]||(l[3]=i=>s.payment.test_mode=i),label:"Test Mode"},null,8,["modelValue"])]))])])]}),_:1})]),_:1},8,["title","onHide","onOk","loading"])}var te=D(O,[["render",ee]]);const oe=t=>/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/.test(t),ne={props:{logo:String,link:String,name:String,description:String,active:Boolean,test_mode:Boolean},emits:["edit"],computed:{isUrlLogo(){return oe(this.logo)}}},se=["src"],ae=["href"];function le(t,l,a,P,s,p){const m=d("base-status"),_=d("base-btn");return o(),r(H,null,{default:n(()=>[e(w,{avatar:""},{default:n(()=>[p.isUrlLogo?(o(),u("img",{key:0,style:{width:"30px"},src:a.logo},null,8,se)):(o(),r(B,{key:1,size:"30px",color:"primary",name:a.logo},null,8,["name"]))]),_:1}),e(w,null,{default:n(()=>[a.link?(o(),r(g,{key:0,caption:""},{default:n(()=>[c("a",{href:a.link,target:"_blank",rel:"noopener noreferrer"},y(a.name),9,ae)]),_:1})):(o(),r(g,{key:1},{default:n(()=>[h(y(a.name),1)]),_:1})),e(g,{caption:"",lines:"2"},{default:n(()=>[h(y(a.description),1)]),_:1}),a.active||a.test_mode?(o(),r(g,{key:2},{default:n(()=>[a.active?(o(),r(m,{key:0,class:"q-ma-none",type:"Active"})):f("",!0),a.test_mode?(o(),r(m,{key:1,type:"Test Mode"})):f("",!0)]),_:1})):f("",!0)]),_:1}),e(w,{side:""},{default:n(()=>[e(g,null,{default:n(()=>[e(_,{onClick:l[0]||(l[0]=T(b=>t.$emit("edit"),["stop"])),color:"grey",icon:"fas fa-edit",flat:"",dense:"",round:""})]),_:1})]),_:1})]),_:1})}var ie=D(ne,[["render",le]]);const re={components:{SkeletonSinglePage:F,PaymentMethod:ie},data(){return{loaded:!1}},methods:{...M(S,["get"]),onEdit(t){console.func("components/settings/ShopLocationsDialog:methods.onEdit()",arguments),this.$q.dialog({component:te,componentProps:{modelValue:t,title:`Set up ${t==null?void 0:t.name}`}})}},computed:{...I(S,["rows"])},mounted(){this.get().then(()=>{this.loaded=!0}).catch(t=>{this.$core.error(t)})}},de={key:0,class:"payment-methods"},me={class:"bg-white payments-list rounded-border"};function ce(t,l,a,P,s,p){const m=d("base-page-header"),_=d("base-btn"),b=d("payment-method"),x=d("skeleton-single-page");return o(),r(A,{padding:""},{default:n(()=>[e(m,{class:"q-mb-md",title:t.$route.meta.title,hint:"Manage the places you stock inventory, fulfill orders, and sell products.",tabs:["Locations","Taxes","Payments"],"use-route":""},null,8,["title"]),s.loaded?(o(),u("div",de,[e(E,null,{default:n(()=>[e(_,{icon:"fas fa-arrow-left",link:"",label:"Go to settings",to:{name:"Settings"}})]),_:1}),e(L,{style:{height:"calc(100vh - 300px)"}},{default:n(()=>[c("div",me,[(o(!0),u(V,null,U(t.rows,(k,v)=>(o(),r(b,N({key:v,class:"payments-card q-py-md"},k,{onEdit:i=>p.onEdit(k)}),null,16,["onEdit"]))),128))])]),_:1})])):(o(),r(x,{key:1}))]),_:1})}var Se=D(re,[["render",ce]]);export{Se as default};
