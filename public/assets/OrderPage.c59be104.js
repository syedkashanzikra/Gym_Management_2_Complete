import{Q as J}from"./QTimeline.b6d0ce4e.js";import{_ as w,aE as p,r as i,o as d,a as _,L as Y,w as l,e as r,t as v,f as s,a9 as q,d as C,J as I,g as b,ac as N,a4 as V,l as k,a7 as R,ab as z,K as Q,I as U,a8 as O,h as x,af as S,aF as G,M as T,F as A,ag as P,Q as K}from"./index.46fdd451.js";import{Q as W}from"./QPage.701dd41d.js";import{P as X}from"./ProductsCard.7a9e6958.js";import{C as Z,U as ee,A as oe,B as te}from"./ChangeLocation.73159995.js";import{A as se}from"./AddressFields.58941de5.js";import{A as ne}from"./AddressCard.b1b2473e.js";import{Q as re}from"./QSelect.37e8c679.js";import{Q as L}from"./QItemLabel.249954d1.js";import{u as H}from"./order.95044cc9.js";import{S as le}from"./SkeletonSinglePage.f05b1d90.js";import"./QBadge.942c3fbf.js";import"./QTd.d26cec80.js";import"./QTable.1702d6ef.js";import"./QMarkupTable.c79e7e8d.js";import"./QTr.6cbeded8.js";import"./QInnerLoading.1459e1ed.js";import"./index.dbe12f27.js";import"./tag.19d681e9.js";import"./category.8d269d68.js";import"./collection.a5cbc931.js";import"./CustomProduct.000af489.js";import"./member.7e2676dd.js";import"./QMenu.84416a21.js";import"./selection.e9a8e664.js";import"./QPopupEdit.af630481.js";import"./payment-method.96e05062.js";import"./location.5cd281da.js";import"./StateSelect.8267e923.js";import"./index.becf6c0c.js";import"./CitySelect.9ee53a09.js";import"./QField.98c52be8.js";import"./QChip.2eda5f32.js";import"./rtl.b51694b1.js";import"./QSkeleton.a3e15f44.js";const de={components:{Products:X},props:{modelValue:{type:Array,required:!0},canEdit:Boolean,creating:Boolean,view:Boolean,location:{type:Object,required:!1}},emits:["changed-location","update:model-value"],methods:{onChangeLocation(){console.func("components/order/UnfulfillmentCard:methods.onChangeLocation()",arguments),this.$q.dialog({component:Z,componentProps:{modelValue:this.location}}).onOk(t=>{this.$emit("changed-location",p.exports.cloneDeep(t))})}},computed:{hasBottom(){return!this.creating&&this.location}}},ae={class:"q-mb-sm"},ie=r("span",{class:"text-grey"},"Location:",-1),ce={class:"q-pl-sm"};function me(t,e,a,c,o,n){const f=i("base-btn"),m=i("products");return d(),_(m,{title:"Products",modelValue:a.modelValue,view:a.view,"onUpdate:modelValue":e[0]||(e[0]=y=>t.$emit("update:model-value",y))},Y({_:2},[n.hasBottom?{name:"bottom",fn:l(()=>[r("div",ae,[ie,r("span",ce,v(a.location.name),1)])]),key:"0"}:void 0,a.canEdit?{name:"action",fn:l(()=>[s(f,{onClick:n.onChangeLocation,link:"",icon:"fas fa-map-marker-edit",label:"Change location",class:"q-ml-md"},null,8,["onClick"])]),key:"1"}:void 0]),1032,["modelValue","view"])}var ue=w(de,[["render",me]]);const he={props:{modelValue:{required:!0,type:[Object]},has_customer:{required:!0,type:[Boolean]}},data(){return{customer:this.modelValue}},emits:["ok","hide"],methods:{show(){console.func("components/address-edit:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/address-edit:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/address-edit:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/address-edit:methods.onDone()",arguments),this.$emit("ok",this.customer),this.hide()}}},pe={class:"row q-col-gutter-md"},_e={class:"col-sm-12 col-xs-12"},fe=r("div",{class:"text-label"},"Email",-1),ge={class:"col-sm-12 col-xs-12"},be=r("div",{class:"text-label"},"Phone number",-1),Ce={key:0,class:"col-sm-12 col-xs-12"},ve={class:"q-gutter-sm"};function ye(t,e,a,c,o,n){const f=i("base-dialog");return d(),_(f,{"content-style":"width: 600px; max-width: 95vw",title:"Edit contact information","body-class":"scroll",ref:"dialog",persistent:"",onHide:n.onDialogHide,"use-separator":""},{body:l(()=>[r("div",pe,[r("div",_e,[fe,s(q,{dense:"",outlined:"",modelValue:o.customer.email,"onUpdate:modelValue":e[0]||(e[0]=m=>o.customer.email=m),type:"text"},null,8,["modelValue"])]),r("div",ge,[be,s(q,{dense:"",outlined:"",modelValue:o.customer.phone_number,"onUpdate:modelValue":e[1]||(e[1]=m=>o.customer.phone_number=m),type:"text"},null,8,["modelValue"])]),a.has_customer?(d(),C("div",Ce,[s(I,{dense:"",modelValue:o.customer.update_customer_profile,"onUpdate:modelValue":e[2]||(e[2]=m=>o.customer.update_customer_profile=m),label:"Update customer profile"},null,8,["modelValue"])])):b("",!0)])]),footer:l(()=>[s(N,{class:"text-right"},{default:l(()=>[r("div",ve,[V(s(k,{"no-caps":"",outline:"",label:"Cancel",color:"grey"},null,512),[[R]]),s(k,{"no-caps":"",label:"Update",color:"primary",onClick:n.onDone},null,8,["onClick"])])]),_:1})]),_:1},8,["onHide"])}var ke=w(he,[["render",ye]]);const Ve={components:{AddressFields:se},props:{modelValue:{type:[Object],required:!0},title:String},data(){return{address:p.exports.cloneDeep(this.modelValue),loading:!1}},emits:["ok","hide"],methods:{show(){console.func("components/order/AddressEdit:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/order/AddressEdit:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/order/AddressEdit:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/order/AddressEdit:methods.onDone()",arguments),this.$emit("ok",this),this.hide()}},computed:{saveLabel(){return"Update"}}},xe={class:"row q-col-gutter-md"},we={class:"col-sm-12 col-xs-12"},Oe={class:"q-gutter-sm"};function De(t,e,a,c,o,n){const f=i("address-fields"),m=i("base-dialog");return d(),_(m,{title:a.title,"body-class":"scroll",ref:"dialog",persistent:"",onHide:n.onDialogHide,"use-separator":""},{body:l(()=>[r("div",xe,[r("div",we,[s(f,{modelValue:o.address,"onUpdate:modelValue":e[0]||(e[0]=y=>o.address=y)},null,8,["modelValue"])])])]),footer:l(()=>[s(N,{class:"text-right"},{default:l(()=>[r("div",Oe,[V(s(k,{"no-caps":"",outline:"",label:"Cancel",color:"grey"},null,512),[[R]]),s(k,{"no-caps":"",label:n.saveLabel,color:"primary",onClick:n.onDone},null,8,["label","onClick"])])]),_:1})]),_:1},8,["title","onHide"])}var Ee=w(Ve,[["render",De]]);const qe={components:{UserSelect:ee,AddressCard:ne},props:{modelValue:{required:!0,type:Object},edit:Boolean,view:Boolean},data(){return{order:p.exports.cloneDeep(this.modelValue),default:p.exports.cloneDeep(this.modelValue)}},emits:["update:model-value","update:customer","update:address"],methods:{onCreateCustomer(t,e){console.func("components/order/CustomerCard:methods.onCreateCustomer()",arguments);const a=t.trim().split(" ");this.$q.dialog({component:oe,componentProps:{modelValue:{first_name:a[0],last_name:a[1]}}}).onOk(c=>{e({first_name:c.first_name,last_name:c.last_name,phone_number:c.phone_number,email:c.email,address:{...c},collect_tax:!0,email_marketing:!0})})},onEditContact(t){console.func("components/order/CustomerCard:methods.onEditContact()",arguments),this.$q.dialog({component:ke,componentProps:{modelValue:Object.assign(this.order.contact||{},{update_customer_profile:Boolean(this.order.contact&&this.order.contact.update_customer_profile)}),has_customer:this.hasCustomer}}).onOk(e=>{console.func("components/order/CustomerCard:methods.onEditContact.onOk()",e),this.order.contact=e,this.$emit("update:model-value",this.order)})},onSelectCustomer(t){if(console.func("components/order/CustomerCard:methods.onSelectCustomer()",arguments),t){this.order.collect_tax=t.collect_tax;const{email:e,phone_number:a}=t;if(!this.default.contact&&(e||a)&&(this.order.contact={email:e,phone_number:a}),!this.default.billing_address){const{first_name:c,last_name:o,phone_number:n,address:f}=t;this.order.billing_address={...f,first_name:c,last_name:o,phone_number:n}}}else this.order.collect_tax=this.default.collect_tax;this.$emit("update:model-value",this.order),this.$emit("update:customer",t)},onEditAddress({title:t,key:e}){var a;console.func("components/order/CustomerCard:methods.onEditAddress()",arguments),this.$q.dialog({component:Ee,componentProps:{modelValue:(a=this.order[e])!=null?a:{},title:t}}).onOk(({address:c})=>{this.order[e]=c,this.$emit("update:model-value",this.order),this.$emit("update:address",c)})}},computed:{hasCustomer(){return Boolean(this.order.customer)},hasBillingAddress(){return Boolean(this.order.billing_address)},hasContact(){return Boolean(this.order.contact)}},watch:{modelValue:{deep:!0,handler(t){this.order=p.exports.cloneDeep(t)}}}},Ue={class:"q-gutter-y-md"},Se={key:0},Ae={key:0,class:"text-grey"},Pe={key:1,class:""},Ne={class:"row flex-center"},Re=r("div",{class:"text-bold"},"CONTACT INFORMATION",-1),Be={key:0},Le={class:"row flex-start"},Ie={key:1,class:"text-grey"},Qe={key:1,class:"billing-address"},Te={class:"row flex-center"},He=r("div",{class:"text-bold"},"BILLING ADDRESS",-1);function Me(t,e,a,c,o,n){const f=i("user-select"),m=i("base-btn"),y=i("base-tooltip"),u=i("address-card"),D=i("base-section");return d(),_(D,{title:"Customer","no-row":""},{action:l(()=>[n.hasCustomer&&a.edit?(d(),_(k,{key:0,onClick:e[0]||(e[0]=g=>t.$refs.customer.clear()),round:"",dense:"",flat:"",color:"primary",icon:"close"})):b("",!0)]),default:l(()=>[r("div",Ue,[V(s(f,{ref:"customer",placeholder:"Select or create customer",modelValue:o.order.customer,"onUpdate:modelValue":[e[1]||(e[1]=g=>o.order.customer=g),n.onSelectCustomer],"prevent-defaults":"",dense:"",outlined:"","use-input":"","hide-no-option":"","option-label":"name","new-value-mode":"add-unique",onNewValue:n.onCreateCustomer,"no-option-message":"No customer found.",icon:"far fa-search"},{button:l(({onCreate:g})=>[s(z,{class:"q-my-sm"}),s(Q,{dense:"",class:"q-pa-none"},{default:l(()=>[s(U,null,{default:l(()=>[s(k,{flat:"","no-caps":"",class:"add-button",icon:"fad fa-plus-circle",label:"Create new customer",align:"left",onClick:g},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue","onNewValue","onUpdate:modelValue"]),[[O,!n.hasCustomer&&a.edit]]),n.hasCustomer?(d(),C("div",Se,[s(m,{link:"",size:"15px",padding:"0",tag:"a",to:{name:"Customer",params:{id:o.order.customer.id}}},{default:l(()=>[x(v(o.order.customer.name),1)]),_:1},8,["to"]),o.order.customer.created_at?(d(),C("div",Ae," Created at: "+v(o.order.customer.created_at),1)):b("",!0),o.order.customer.note?(d(),C("div",Pe,v(o.order.customer.note),1)):b("",!0)])):b("",!0),r("div",null,[r("div",Ne,[Re,s(S),a.edit?(d(),_(m,{key:0,link:"",label:"Edit",onClick:n.onEditContact},null,8,["onClick"])):b("",!0)]),n.hasContact?(d(),C("div",Be,[r("div",Le,[s(m,{link:"",padding:"0",label:o.order.contact.email},null,8,["label"]),s(k,{onClick:e[2]||(e[2]=g=>t.$core.copyToClipboard(o.order.contact.email)),flat:"",dense:"",round:"",padding:"0",size:"xs",icon:"fas fa-clipboard"},{default:l(()=>[s(y,null,{default:l(()=>[x("Copy email")]),_:1})]),_:1})]),r("div",null,v(o.order.contact.phone_number),1)])):(d(),C("div",Ie,"No contact info provided"))]),n.hasBillingAddress?(d(),C("div",Qe,[r("div",Te,[He,s(S),s(k,{onClick:e[3]||(e[3]=g=>t.$core.copyToClipboard(o.order.billing_address)),flat:"",dense:"",padding:"0",size:"xs",icon:"fas fa-clipboard",class:"q-mr-xs"},{default:l(()=>[s(y,null,{default:l(()=>[x("Copy address")]),_:1})]),_:1}),a.edit?(d(),_(m,{key:0,link:"",padding:"0",label:"Edit",onClick:e[4]||(e[4]=g=>n.onEditAddress({key:"billing_address",title:"Edit billing address"}))})):b("",!0)]),s(u,G({class:"q-mt-sm",ref:"billing"},o.order.billing_address),null,16)])):b("",!0)])]),_:1})}var Fe=w(qe,[["render",Me]]);const je={props:{modelValue:Object},data(){return{order:p.exports.cloneDeep(this.modelValue),cancel_order:{moduleId:this.modelValue.id,reason:"CUSTOMER",restock:!0,refund:!0,send_customer_notification:!0}}},emits:["ok","hide"],methods:{...T(H,["cancel"]),show(){console.func("components/order/CancelOrder:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/order/CancelOrder:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/order/CancelOrder:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/order/CancelOrder:methods.onDone()",arguments),this.cancel(this.cancel_order).then(({data:t,message:e})=>{this.$q.notify(e),this.$emit("ok",t),this.hide()}).catch(t=>{this.$core.error(t,{title:"Error"})})}}},$e={class:"row q-col-gutter-md"},Je={class:"col-sm-12 col-xs-12"},Ye=r("div",{class:"text-label"},"REASON",-1),ze={key:0,class:"col-sm-12 col-xs-12"},Ge=r("div",{class:"text-label"},"REFUND PAYMENT",-1),Ke={class:"text-weight-medium"},We=r("div",{class:"text-weight-medium"},"Refund later",-1),Xe=r("div",{class:"q-item__label--caption text-caption"}," Your customer won\u2019t be refunded. Refund the amount owed at a later point. ",-1),Ze={class:"col-sm-12 col-xs-12"},eo=r("div",{class:"text-label"},"INVENTORY",-1),oo={class:"col-sm-12 col-xs-12"},to=r("div",{class:"text-weight-bold"},"NOTIFY CUSTOMER OF CANCELATION",-1),so=r("div",null,"Send cancelation details to your customer now",-1),no={class:"q-gutter-sm"};function ro(t,e,a,c,o,n){const f=i("base-radio"),m=i("base-checkbox"),y=i("base-dialog");return d(),_(y,{"content-style":"width: 800px; max-width: 95vw",title:"Cancel order","body-class":"scroll",ref:"dialog",persistent:"","use-separator":"",onHide:n.onDialogHide},{body:l(()=>[r("div",$e,[r("div",Je,[Ye,s(re,{dense:"",outlined:"",modelValue:o.cancel_order.reason,"onUpdate:modelValue":e[0]||(e[0]=u=>o.cancel_order.reason=u),"map-options":"","emit-value":"","options-dense":"",options:[{label:"Customer changed/cancelled order",value:"CUSTOMER"},{label:"Fraudulent order",value:"FRAUD"},{label:"Items unavailable",value:"INVENTORY"},{label:"Payment declined",value:"DECLINED"},{label:"Other",value:"OTHER"}]},null,8,["modelValue"])]),o.order.has_payment?(d(),C("div",ze,[Ge,r("div",null,[s(f,{modelValue:o.cancel_order.refund,"onUpdate:modelValue":e[1]||(e[1]=u=>o.cancel_order.refund=u),"no-hint":!o.cancel_order.refund,val:!0},{label:l(()=>[r("div",Ke," Refund "+v(t.$core.money(o.order.paid_total)),1)]),hint:l(()=>[(d(!0),C(A,null,P(o.order.payments,u=>(d(),_(Q,{class:"q-pa-none",dense:"",key:u.id},{default:l(()=>[s(U,{style:{"min-width":"auto"},avatar:""},{default:l(()=>[s(K,{size:"25px",name:u.payment_method.logo},null,8,["name"])]),_:2},1024),s(U,null,{default:l(()=>[s(L,null,{default:l(()=>[x(v(u.payment_method.name),1)]),_:2},1024),s(L,{caption:""},{default:l(()=>[x(v(t.$core.money(u.amount))+" available to refund ",1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1},8,["modelValue","no-hint"])]),r("div",null,[s(f,{modelValue:o.cancel_order.refund,"onUpdate:modelValue":e[2]||(e[2]=u=>o.cancel_order.refund=u),"no-hint":o.cancel_order.refund,val:!1},{label:l(()=>[We]),hint:l(()=>[Xe]),_:1},8,["modelValue","no-hint"])])])):b("",!0),r("div",Ze,[eo,s(I,{dense:"",modelValue:o.cancel_order.restock,"onUpdate:modelValue":e[3]||(e[3]=u=>o.cancel_order.restock=u),label:"Restock items"},null,8,["modelValue"])]),r("div",oo,[s(m,{dense:"",modelValue:o.cancel_order.send_customer_notification,"onUpdate:modelValue":e[4]||(e[4]=u=>o.cancel_order.send_customer_notification=u)},{default:l(()=>[to,so]),_:1},8,["modelValue"])])])]),footer:l(()=>[s(N,{class:"row flex"},{default:l(()=>[s(S),r("div",no,[V(s(k,{"no-caps":"",outline:"",label:"Cancel",color:"grey"},null,512),[[R]]),s(k,{"no-caps":"",label:"Done",color:"primary",onClick:n.onDone},null,8,["onClick"])])]),_:1})]),_:1},8,["onHide"])}var lo=w(je,[["render",ro]]);const E={source:"Draft Order",customer:null,contact:null,billing_address:null,collect_tax:!0,line_items:[],tax_lines:[]},ao={components:{SkeletonSinglePage:le,ProductsCard:ue,BillingDetails:te,CustomerCard:Fe},data(){return{loaded:!1,submited:!1,default:p.exports.cloneDeep(E),order:p.exports.cloneDeep(E),options:[]}},methods:{...T(H,["show","store","update","calculator","markAsPaid","duplicate","comment","receipt"]),onLoad(){console.func("pages/admins/orders/OrderPage:methods.onLoad()",arguments),this.show(this.id).then(t=>{this.onAssign(t),this.loaded=!0}).catch(t=>{this.$emit("error",t)})},onSubmit(t){console.func("pages/admins/orders/OrderPage:methods.onSubmit()",arguments);const{payment_method:e}=t||{};this.submited=!0,(this.creating?this.store:this.update)({...this.order,payment_method:e}).then(async({data:c,message:o})=>{this.submited=!1,await this.onAssign(c),await this.$router.push({name:"Single Order",params:{id:c.id},query:{action:"view"}}),this.$q.notify(o)}).catch(c=>{this.submited=!1,this.$core.error(c,{title:"Error"})})},onReset(){console.func("pages/admins/orders/OrderPage:methods.onReset()",arguments),this.loaded=!1,setTimeout(()=>{this.onAssign(this.default),this.loaded=!0},300)},onAssign(t=E){console.func("pages/admins/orders/OrderPage:methods.onAssign()",arguments),this.order=p.exports.cloneDeep(t),this.default=p.exports.cloneDeep(t)},onCancel(t){console.func("pages/admins/orders/OrderPage:methods.onCancel()",arguments),this.$router.back()},onCreateComment(t){console.func("pages/admins/orders/OrderPage:methods.onCreateComment()",arguments),this.order.logs.splice(0,0,t),this.default=p.exports.cloneDeep(this.order)},onUpdateComment(t){console.func("pages/admins/orders/OrderPage:methods.onUpdateComment()",arguments),this.default=p.exports.cloneDeep(this.order)},onRemoveComment(t){console.func("pages/admins/orders/OrderPage:methods.onRemoveComment()",arguments),this.order.logs.splice(t,1),this.default=p.exports.cloneDeep(this.order)},onCalculator(){console.func("pages/admins/orders/OrderPage:methods.onCalculator()",arguments),this.calculator(Object.assign(p.exports.cloneDeep(this.order),{logs:null})).then(t=>{Object.assign(this.order,t)}).catch(t=>{this.$core.error(t,{title:"Error"})})},onChangeLocation(t){console.func("pages/orders/single:methods.onChangeLocation()",arguments),this.order.location=p.exports.cloneDeep(t),this.submited=!0,this.update(this.order).then(({message:e})=>{this.submited=!1,this.$q.notify(e),this.default=p.exports.cloneDeep(this.order)}).catch(e=>{this.submited=!1,this.$core.error(e,{title:"Error"})})},onMarkedPaid(t){if(console.func("pages/orders/single:methods.onMarkedPaid()",arguments),this.creating)return this.onSubmit({payment_method:t}),!1;this.markAsPaid({moduleId:this.order.id,payment_method:t}).then(({message:e})=>{this.$q.notify(e),this.onLoad()}).catch(e=>{this.$core.error(e,{title:"Error"})})},onDuplicate(){console.func("pages/orders/single:methods.onDuplicate()",arguments),this.duplicate({moduleId:this.order.id}).then(({data:t,message:e})=>{this.$q.notify(e),this.$router.push({name:"Single Order",params:{id:t.id},query:{action:"edit"}})}).catch(t=>{this.$core.error(t,{title:"Error"})})},onEdit(t){console.func("pages/orders/single:methods.onEdit()",arguments),this.$router.push({name:"Single Order",params:{id:t.id},query:{action:"edit"}})},onCancelOrder(){console.func("pages/orders/single:methods.onCancelOrder()",arguments),this.$q.dialog({component:lo,componentProps:{modelValue:this.order}}).onOk(t=>{this.onAssign(t)})}},mounted(){this.creating?this.loaded=!0:this.onLoad()},computed:{id(){return this.$route.params.id},action(){return this.$route.query.action},view(){return this.action!=="edit"},edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},disable(){return this.default&&JSON.stringify(this.order)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.order)!==JSON.stringify(this.default)}}},io={class:"text-subtitle2"},co={class:"row q-col-gutter-md"},mo={class:"col-xs-12 col-sm-9"},uo={class:"q-gutter-md"},ho={class:"col-xs-12 col-sm-3"},po={class:"q-gutter-md"},_o={class:"note"},fo=r("div",{class:"q-mt-sm"}," These notes are private and won't be shared with the customer. ",-1);function go(t,e,a,c,o,n){const f=i("base-status"),m=i("base-item"),y=i("base-page-toolbar"),u=i("products-card"),D=i("billing-details"),g=i("base-section"),B=i("base-note-card"),M=i("customer-card"),F=i("base-form"),j=i("skeleton-single-page");return d(),_(W,{padding:""},{default:l(()=>[o.loaded&&!n.creating?(d(),_(y,{key:0,class:"q-mb-md"},{title:l(()=>[x(v(o.order.formated_id)+" ",1),(d(!0),C(A,null,P(o.order.status,h=>(d(),_(f,{key:h.id,type:h.label},null,8,["type"]))),128)),r("div",io,v(o.order.created_at)+" from "+v(o.order.source),1)]),actions:l(()=>[V(s(m,{onClick:e[0]||(e[0]=h=>n.onEdit(o.order)),icon:"fas fa-edit",label:"Edit"},null,512),[[O,o.order.can_edit&&n.view]]),V(s(m,{onClick:e[1]||(e[1]=h=>t.receipt(o.order.id)),icon:"fas fa-receipt",label:"Print receipt"},null,512),[[O,o.order.id]]),s(m,{onClick:n.onDuplicate,icon:"fas fa-clone",label:"Duplicate"},null,8,["onClick"]),V(s(m,{onClick:n.onCancelOrder,class:"text-negative",icon:"fas fa-times",label:"Cancel order"},null,8,["onClick"]),[[O,!o.order.is_cancelled]])]),_:1})):b("",!0),o.loaded?(d(),_(F,{key:1,onSubmit:n.onSubmit,onCancel:n.onCancel,onReset:n.onReset,resetable:n.resetable,disable:n.disable,submited:o.submited},{default:l(()=>[r("div",co,[r("div",mo,[r("div",uo,[s(u,{view:!n.edit,creating:n.creating,"can-edit":o.order.can_edit,modelValue:o.order.line_items,"onUpdate:modelValue":[e[2]||(e[2]=h=>o.order.line_items=h),n.onCalculator],location:o.order.location,onChangedLocation:n.onChangeLocation},null,8,["view","creating","can-edit","modelValue","location","onUpdate:modelValue","onChangedLocation"]),s(g,{title:"Billing details","no-row":""},{default:l(()=>[s(D,{view:!n.edit,ref:"billing","has-payment":"",modelValue:o.order,"onUpdate:modelValue":[e[3]||(e[3]=h=>o.order=h),n.onCalculator],"has-due":o.order.has_due,onMarkedPaid:n.onMarkedPaid},null,8,["view","modelValue","has-due","onMarkedPaid","onUpdate:modelValue"])]),_:1}),n.creating?b("",!0):(d(),_(g,{key:0,title:"Activity",description:"With activity, you can view detailed histories and write notes and comments for order.","body-class":"q-px-lg","no-row":""},{default:l(()=>[s(J,{class:"comments",color:"secondary"},{default:l(()=>[s(B,{"module-action":t.comment,"module-id":o.order.id,class:"comment",creating:"","no-rag":"",onCreate:n.onCreateComment},null,8,["module-action","module-id","onCreate"]),(d(!0),C(A,null,P(o.order.logs,(h,$)=>(d(),_(B,{class:"comment",key:h.id,date_time:h.created_at_human,onUpdate:n.onUpdateComment,onRemove:bo=>n.onRemoveComment($),message:h.message,comment:h,user:h.admin,module:"log/Update","module-id":o.order.id},null,8,["date_time","onUpdate","onRemove","message","comment","user","module-id"]))),128))]),_:1})]),_:1}))])]),r("div",ho,[r("div",po,[s(M,{edit:n.edit,view:n.view,modelValue:o.order,"onUpdate:modelValue":e[4]||(e[4]=h=>o.order=h),"onUpdate:address":n.onCalculator,"onUpdate:customer":n.onCalculator},null,8,["edit","view","modelValue","onUpdate:address","onUpdate:customer"]),s(g,{title:"Notes","no-row":""},{default:l(()=>[r("div",_o,[s(q,{dense:"",outlined:"",modelValue:o.order.note,"onUpdate:modelValue":e[5]||(e[5]=h=>o.order.note=h),type:"text"},null,8,["modelValue"]),fo])]),_:1})])])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(d(),_(j,{key:2}))]),_:1})}var et=w(ao,[["render",go]]);export{et as default};
