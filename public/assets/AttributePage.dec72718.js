import{_ as N,aE as p,M as P,r as n,o as r,a as c,w as a,e as l,f as e,h as b,t as h,d as S,ag as U,af as R,g as B,K as D,I as k,j as $,i as z,J as F,ab as J,F as T,l as I,a6 as O}from"./index.46fdd451.js";import{Q as E}from"./QColor.12e1666a.js";import{Q as L}from"./QPopupProxy.e4ea2ef4.js";import{Q as A}from"./QItemLabel.249954d1.js";import{Q as M}from"./QPage.701dd41d.js";import{F as Y}from"./FileSelector.fa33ffa8.js";import{S as j}from"./SkeletonSinglePage.f05b1d90.js";import{u as G}from"./attribute.ff1f899d.js";import"./TouchPan.ea2c677f.js";import"./touch.3df10340.js";import"./selection.e9a8e664.js";import"./QResizeObserver.b7431853.js";import"./rtl.b51694b1.js";import"./QTabPanel.ecb3f794.js";import"./colors.8bd06824.js";import"./QMenu.84416a21.js";import"./FileCard.22a9b7b0.js";import"./QToolbarTitle.cb225f03.js";import"./QToolbar.72090c76.js";import"./QImg.7965eef6.js";import"./QInnerLoading.1459e1ed.js";import"./QSkeleton.a3e15f44.js";const Q={name:"",is_button:!1,values:[]},K={components:{ThumbnailSelector:Y,SkeletonSinglePage:j},data(){return{loaded:!1,submited:!1,default:p.exports.cloneDeep(Q),attribute:p.exports.cloneDeep(Q),options:[]}},methods:{...P(G,["show","store","update"]),onSubmit(t){console.func("pages/admins/attributes/AttributePage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.attribute).then(({data:m,message:V})=>{this.submited=!1,this.$q.notify(V),this.attribute=m,this.default=p.exports.cloneDeep(m),this.$router.push({name:"Single Attribute",params:{id:m.id},query:{action:"edit"}})}).catch(m=>{this.submited=!1,this.$core.error(m,{title:this.$t("dialog.title.error")})})},onReset(t){console.func("pages/admins/attributes/AttributePage:methods.onReset()",arguments),this.loaded=!1,setTimeout(()=>{this.attribute=p.exports.cloneDeep(this.default),this.loaded=!0},1)},onCancel(t){console.func("pages/admins/attributes/AttributePage:methods.onCancel()",arguments),this.$router.back()},onAddValue(t){console.func("pages/admins/attributes/AttributePage:method.onAddValue()",arguments),this.attribute.values.push(t)},onRemoveValue(t){console.func("pages/admins/attributes/AttributePage:method.onRemoveValue()",arguments),this.attribute.values.splice(t,1)}},mounted(){this.creating?this.loaded=!0:this.show(this.id).then(t=>{this.attribute=t,this.default=p.exports.cloneDeep(t),this.loaded=!0}).catch(t=>{this.$emit("error",t)})},computed:{edit(){return["add","edit"].includes(this.action)||this.creating},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.attribute)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.attribute)!==JSON.stringify(this.default)}}},H={class:"row q-col-gutter-md"},W={class:"col-xs-12 col-sm-9"},X={class:"q-gutter-md"},Z={class:"col-xs-12"},ee={class:"col-xs-12"},te={class:"flex items-center"},ae={class:"col-xs-12 col-sm-3"},oe={class:"q-gutter-md"};function se(t,u,m,V,s,d){const f=n("base-label"),v=n("base-input"),_=n("base-section"),q=n("base-btn"),y=n("base-tooltip"),w=n("thumbnail-selector"),C=n("base-form"),x=n("skeleton-single-page");return r(),c(M,{padding:""},{default:a(()=>[s.loaded?(r(),c(C,{key:0,onSubmit:d.onSubmit,onCancel:d.onCancel,onReset:d.onReset,resetable:d.resetable,disable:d.disable,submited:s.submited},{default:a(()=>[l("div",H,[l("div",W,[l("div",X,[e(_,{title:"General information",description:"Attributes let you define extra product data, such as size or colour. You can use these attributes in the shop sidebar using the `layered nav` widgets."},{default:a(()=>[l("div",Z,[e(f,null,{default:a(()=>[b(h(t.$t("label.name")),1)]),_:1}),e(v,{modelValue:s.attribute.name,"onUpdate:modelValue":u[0]||(u[0]=o=>s.attribute.name=o)},null,8,["modelValue"])])]),_:1}),e(_,{title:"Values",description:"Attribute values can be assigned to products and variations."},{default:a(()=>[l("div",ee,[(r(!0),S(T,null,U(s.attribute.values,(o,g)=>(r(),S("div",{key:g,class:"q-mb-md value"},[l("div",te,[e(f,null,{default:a(()=>[b(h(t.$t("label.value"))+" "+h(g+1),1)]),_:2},1024),e(R),s.attribute.values.length>1?(r(),c(q,{key:0,link:"",class:"q-ml-sm",padding:"0",label:t.$t("label.remove"),onClick:i=>d.onRemoveValue(g)},null,8,["label","onClick"])):B("",!0)]),e(D,{class:"q-pa-none"},{default:a(()=>[e(k,{avatar:""},{default:a(()=>[o.has_thumbnail?(r(),c(w,{key:0,mini:"","load-from-server":"","dialog-label":t.$t("label.uploadthumbnail"),icon:"fad fa-image",hint:"You can only choose images as value media","model-value":o.thumbnail,"onUpdate:modelValue":i=>o.thumbnail=i},{default:a(()=>[e(y,{position:"top"},{default:a(()=>[b(" Select an image ")]),_:1})]),_:2},1032,["dialog-label","model-value","onUpdate:modelValue"])):(r(),c($,{key:1,rounded:"",size:"60px",style:z({background:o.color||"var(--q-primary)"}),icon:"fas fa-eye-dropper","text-color":"white"},{default:a(()=>[e(L,{cover:"","transition-show":"scale","transition-hide":"scale"},{default:a(()=>[e(E,{modelValue:o.color,"onUpdate:modelValue":i=>o.color=i},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),e(y,{position:"top"},{default:a(()=>[b(" Select color ")]),_:1})]),_:2},1032,["style"]))]),_:2},1024),e(k,null,{default:a(()=>[e(A,null,{default:a(()=>[e(v,{modelValue:o.name,"onUpdate:modelValue":i=>o.name=i,placeholder:"Name"},null,8,["modelValue","onUpdate:modelValue"]),e(F,{class:"q-mt-sm",dense:"",size:"xs",label:t.$t("label.imagePreviewForThisValue"),modelValue:o.has_thumbnail,"onUpdate:modelValue":i=>o.has_thumbnail=i,color:"green"},null,8,["label","modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024)]),_:2},1024),e(J,{class:"q-mt-md"})]))),128)),e(I,{"no-caps":"",outline:"",label:t.$t("label.AddNewAttributeName",{attribute:s.attribute.name}),onClick:u[1]||(u[1]=o=>d.onAddValue({id:!1,name:null,has_thumbnail:!1,color:null}))},null,8,["label"])])]),_:1})])]),l("div",ae,[e(_,{"no-row":""},{default:a(()=>[l("div",oe,[l("div",null,[e(f,null,{default:a(()=>[b(h(t.$t("label.attributeVisibilityMode")),1)]),_:1}),e(O,{label:t.$t("label.isButton"),dense:"",size:"sm",modelValue:s.attribute.is_button,"onUpdate:modelValue":u[2]||(u[2]=o=>s.attribute.is_button=o),color:"green"},null,8,["label","modelValue"]),e(A,{class:"q-mt-sm"},{default:a(()=>[b(" Enable this if you want to show this attribute as button on products in your store. ")]),_:1})])])]),_:1})])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(r(),c(x,{key:1}))]),_:1})}var we=N(K,[["render",se]]);export{we as default};
