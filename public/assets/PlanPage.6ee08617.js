import{_ as N,aE as f,M as D,N as F,r as p,o as d,a as _,w as i,e as o,f as n,h as u,t as m,J as C,d as g,g as O,F as v,ag as B}from"./index.46fdd451.js";import{Q as J}from"./QPage.701dd41d.js";import{S as M}from"./SkeletonSinglePage.f05b1d90.js";import{u as x}from"./plan.58f50406.js";import"./QSkeleton.a3e15f44.js";const S={is_custom:!1,default_interval:"month",interval:"month",interval_count:1,custom_fee:0,monthly_fee:0,yearly_fee:0,is_active:!0,description:`Max <strong>1/mo</strong> Guest pass
Max <strong>5/mo</strong> Classes
Full Access to the Facilities
Classes and Online Portal`,features:[{label:"Classes",key:"classes",description:"Maximum classes can be booked and join.",value:5},{label:"Guest pass",key:"guestPass",description:"Allows non-members to try out the gym or studio facilities",value:1}]},R={components:{SkeletonSinglePage:M},data(){return{default:f.exports.cloneDeep(S),plan:f.exports.cloneDeep(S),loaded:!1,submited:!1}},methods:{...D(x,["store","show","update"]),onSubmit(e){console.func("pages/admins/plans/PlanPage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.plan).then(({data:c,message:V})=>{this.submited=!1,this.$q.notify(V),this.plan=c,this.default=f.exports.cloneDeep(c),this.$router.push({name:"Single Plan",params:{id:c.id},query:{action:"edit"}})}).catch(c=>{this.submited=!1,this.$core.error(c,{title:this.$t("dialog.title.error")})})},onReset(e){console.func("pages/admins/plans/PlanPage:methods.onReset()",arguments),this.loaded=!1,this.$nextTick(()=>{this.plan=f.exports.cloneDeep(this.default),this.loaded=!0})},onCancel(e){console.func("pages/admins/plans/PlanPage:methods.onCancel()",arguments),this.$router.go(-1)},onChangeInterval(e){console.func("pages/admins/plans/PlanPage:methods.onChangeInterval()",arguments),e==="custom"?this.plan.interval="month":this.plan.interval=e}},async mounted(){this.creating?this.loaded=!0:this.show(this.id).then(e=>{this.plan=e,this.default=f.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})},computed:{...F(x,["intervalOptions"]),edit(){return["add","edit"].includes(this.action)||this.id==="add"},creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},disable(){return this.default&&JSON.stringify(this.plan)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.plan)!==JSON.stringify(this.default)},features(){return this.plan.features.map(e=>({...e,key:this.$core.toCamelCase(e.label)}))}}},I={class:"q-gutter-md"},A={class:"col-xs-12 col-sm-12"},Q={class:"col-xs-12 col-sm-12"},E={class:"col-xs-12 col-sm-12"},G={class:"row q-col-gutter-md"},T={class:"col-xs-12 col-sm-4"},j={class:"col-xs-12 col-sm-8"},L={class:"row q-col-gutter-sm"},z={class:"col-xs-12 col-sm-6"},H={key:0,class:"col-xs-12 col-sm-6"},K={class:"row q-col-gutter-sm"},W={class:"col-sm-6 col-xs-6"},X={class:"col-sm-6 col-xs-6"},Y={class:"col-xs-12 col-sm-4"},Z={class:"col-xs-12 col-sm-4"},$={class:"col-xs-12 col-sm-6"},ee={class:"col-xs-12 col-sm-6"},le={class:"col-xs-12"};function te(e,s,c,V,l,a){const r=p("base-label"),h=p("base-input"),y=p("base-price-input"),k=p("base-select"),P=p("base-section"),w=p("base-form"),U=p("skeleton-single-page");return d(),_(J,{padding:""},{default:i(()=>[l.loaded?(d(),_(w,{key:0,onSubmit:a.onSubmit,onCancel:a.onCancel,onReset:a.onReset,resetable:a.resetable,disable:a.disable,submited:l.submited},{default:i(()=>[o("div",I,[n(P,{flat:"",bordered:"",title:e.$t("generalInformation"),description:e.$t("plans.generalDesc")},{default:i(()=>[o("div",A,[n(r,{required:""},{default:i(()=>[u(m(e.$t("label.label")),1)]),_:1}),n(h,{modelValue:l.plan.label,"onUpdate:modelValue":s[0]||(s[0]=t=>l.plan.label=t),type:"text"},null,8,["modelValue"])]),o("div",Q,[n(C,{dense:"",modelValue:l.plan.is_custom,"onUpdate:modelValue":s[1]||(s[1]=t=>l.plan.is_custom=t),label:e.$t("customBillingPeriod"),color:"green",disable:!a.creating},null,8,["modelValue","label","disable"])]),o("div",E,[o("div",G,[l.plan.is_custom?(d(),g(v,{key:0},[o("div",T,[n(r,{required:""},{default:i(()=>[u(m(e.$t("renewalFee")),1)]),_:1}),n(y,{readonly:!a.creating,dense:"",outlined:"",modelValue:l.plan.custom_fee,"onUpdate:modelValue":s[2]||(s[2]=t=>l.plan.custom_fee=t),type:"text",hint:e.$t("hint.plan",{field:"renewal fee"})},null,8,["readonly","modelValue","hint"])]),o("div",j,[n(r,{required:""},{default:i(()=>[u(m(e.$t("billingPeriod")),1)]),_:1}),o("div",L,[o("div",z,[n(k,{readonly:!a.creating,dense:"",outlined:"",modelValue:l.plan.default_interval,"onUpdate:modelValue":[s[3]||(s[3]=t=>l.plan.default_interval=t),a.onChangeInterval],options:e.intervalOptions,"emit-value":"","map-options":"",hint:e.$t("hint.plan",{field:"billing period"})},null,8,["readonly","modelValue","options","onUpdate:modelValue","hint"])]),l.plan.default_interval==="custom"?(d(),g("div",H,[o("div",K,[o("div",W,[n(h,{readonly:!a.creating,dense:"",outlined:"",modelValue:l.plan.interval_count,"onUpdate:modelValue":s[4]||(s[4]=t=>l.plan.interval_count=t),prefix:e.$t("prefix.every"),type:"number",min:"1",step:"1",style:{width:"100%"}},null,8,["readonly","modelValue","prefix"])]),o("div",X,[n(k,{readonly:!a.creating,dense:"",outlined:"",modelValue:l.plan.interval,"onUpdate:modelValue":s[5]||(s[5]=t=>l.plan.interval=t),options:[{label:"days",value:"day"},{label:"weeks",value:"week"},{label:"months",value:"month"}],"emit-value":"","map-options":"",style:{width:"100%"}},null,8,["readonly","modelValue"])])])])):O("",!0)])])],64)):(d(),g(v,{key:1},[o("div",Y,[n(r,{required:""},{default:i(()=>[u(m(e.$t("monthlyFee")),1)]),_:1}),n(y,{readonly:!a.creating,dense:"",outlined:"",modelValue:l.plan.monthly_fee,"onUpdate:modelValue":s[6]||(s[6]=t=>l.plan.monthly_fee=t),type:"text",hint:e.$t("hint.plan",{field:"monthly fee"})},null,8,["readonly","modelValue","hint"])]),o("div",Z,[n(r,{required:""},{default:i(()=>[u(m(e.$t("yearlyFee")),1)]),_:1}),n(y,{readonly:!a.creating,dense:"",outlined:"",modelValue:l.plan.yearly_fee,"onUpdate:modelValue":s[7]||(s[7]=t=>l.plan.yearly_fee=t),type:"text",hint:e.$t("hint.plan",{field:"yearly fee"})},null,8,["readonly","modelValue","hint"])])],64))])]),o("div",$,[n(r,null,{default:i(()=>[u(m(e.$t("description")),1)]),_:1}),n(h,{modelValue:l.plan.description,"onUpdate:modelValue":s[8]||(s[8]=t=>l.plan.description=t),type:"textarea"},null,8,["modelValue"])]),o("div",ee,[n(r,null,{default:i(()=>[u(m(e.$t("note")),1)]),_:1}),n(h,{modelValue:l.plan.note,"onUpdate:modelValue":s[9]||(s[9]=t=>l.plan.note=t),type:"textarea"},null,8,["modelValue"])]),o("div",le,[n(C,{dense:"",modelValue:l.plan.is_active,"onUpdate:modelValue":s[10]||(s[10]=t=>l.plan.is_active=t),label:e.$t("active"),color:"green"},null,8,["modelValue","label"])])]),_:1},8,["title","description"]),n(P,{flat:"",bordered:"",title:e.$t("features"),description:e.$t("plans.featureDesc")},{default:i(()=>[(d(!0),g(v,null,B(a.features,(t,b)=>(d(),g("div",{key:b,class:"col-xs-12 col-sm-4"},[n(r,{required:""},{default:i(()=>[u(m(e.$t("plan.features."+t.key)),1)]),_:2},1024),n(h,{modelValue:l.plan.features[b].value,"onUpdate:modelValue":q=>l.plan.features[b].value=q,modelModifiers:{number:!0},type:"number",min:"-1",hint:e.$t("hint.features."+t.key)},null,8,["modelValue","onUpdate:modelValue","hint"])]))),128))]),_:1},8,["title","description"])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(d(),_(U,{key:1}))]),_:1})}var re=N(R,[["render",te]]);export{re as default};
