import{M as T,aE as w,_ as L,o as s,d as S,f as t,w as n,K as q,ah as ue,ai as re,I as p,e as g,a6 as he,F as E,ag as $,a as V,h,t as k,l as D,O as I,g as U,m as fe,T as Ce,dF as we,U as qe,y as x,v as xe,z as Ee,D as P,a9 as se,s as De,aR as Pe,dG as me,dH as Oe,a_ as Ue,N as ge,r as f,af as Le,ab as ve,a4 as A,aZ as Ne,a7 as Q,cL as Te,cM as $e,J as ee,ac as Y,Q as Be}from"./index.46fdd451.js";import{Q as Ae}from"./QPage.701dd41d.js";import{u as Qe}from"./index.dbe12f27.js";import{u as W,P as be,I as _e}from"./PricingSection.8b2234e0.js";import{u as Ve}from"./location.5cd281da.js";import{C as He}from"./CategorySelect.d1b1d0fd.js";import{Q as C}from"./QItemLabel.249954d1.js";import{Q as te}from"./QSelect.37e8c679.js";import{u as Ie}from"./collection.a5cbc931.js";import{Q as Fe}from"./QMenu.84416a21.js";import{u as Me}from"./attribute.ff1f899d.js";import{Q as ye}from"./QChip.2eda5f32.js";import{a as ze,u as Re}from"./tag.19d681e9.js";import{F as Je}from"./FileSelector.fa33ffa8.js";import{S as je}from"./SkeletonSinglePage.f05b1d90.js";import{S as Ke}from"./SeoSection.c1301ced.js";import"./category.8d269d68.js";import"./QTd.d26cec80.js";import"./QTable.1702d6ef.js";import"./QMarkupTable.c79e7e8d.js";import"./QToolbarTitle.cb225f03.js";import"./QPopupEdit.af630481.js";import"./QField.98c52be8.js";import"./rtl.b51694b1.js";import"./selection.e9a8e664.js";import"./FileCard.22a9b7b0.js";import"./QToolbar.72090c76.js";import"./QImg.7965eef6.js";import"./QInnerLoading.1459e1ed.js";import"./QSkeleton.a3e15f44.js";const Ge={props:{modelValue:{required:!0}},emits:["update:model-value"],data(){return{options:[]}},methods:{...T(Ie,["get"]),onCollectionLoad(e,o){console.func("components/product/CollectionsSelect:methods.onCollectionLoad()",arguments),this.options=[],this.get({filter:e,rowsPerPage:5,sortBy:"name"}).then(({data:i})=>{o(()=>{this.options=i})})},removeCollection(e){console.func("components/product/CollectionsSelect:methods.removeCollection()",arguments);const o=this.modelValue||[];o.splice(e,1),this.$emit("update:model-value",o)},toggleCollection(e){console.func("components/product/CollectionsSelect:methods.toggleCollection()",arguments);const o=this.modelValue||[],i=w.exports.findIndex(o,{name:e.name});i>-1?this.removeCollection(i):(o.push(e),this.$emit("update:model-value",o))},onChange(e){console.func("components/product/CollectionsSelect:methods.onChange()",arguments),this.$emit("update:model-value",e)}}},We={class:"collection-select"},Ye=["innerHTML"],Ze={key:0};function Xe(e,o,i,c,l,a){return s(),S("div",We,[t(te,{hint:"Add this product to a collection so it\u2019s easy to find in your store.",style:{"padding-bottom":"30px"},placeholder:"Search for collections","model-value":i.modelValue,options:l.options,"use-input":"","map-options":"","input-debounce":"500",debounce:"500","option-label":"name","option-value":"name",dense:"",outlined:"",multiple:"","popup-content-class":"q-pa-sm base-dropdown",onFilter:a.onCollectionLoad,"onUpdate:modelValue":a.onChange,"display-value":null},{option:n(({itemProps:r,opt:m})=>[t(q,ue(re(r)),{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[g("span",{innerHTML:m.name},null,8,Ye)]),_:2},1024)]),_:2},1024),t(p,{side:""},{default:n(()=>[t(he,{dense:"",size:"xs","true-value":1,"false-value":0,"model-value":i.modelValue.filter(u=>u.name===m.name).length,"onUpdate:modelValue":u=>a.toggleCollection(m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","options","onFilter","onUpdate:modelValue"]),i.modelValue?(s(),S("div",Ze,[t(I,{class:"bordered",dense:""},{default:n(()=>[(s(!0),S(E,null,$(i.modelValue,(r,m)=>(s(),V(q,{key:m},{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[h(k(r.name),1)]),_:2},1024)]),_:2},1024),t(p,{side:""},{default:n(()=>[t(D,{size:"xs",color:"primary",icon:"close",round:"",flat:"",onClick:u=>a.removeCollection(m)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))]),_:1})])):U("",!0)])}var et=L(Ge,[["render",Xe],["__scopeId","data-v-48933f56"]]);function X(e,o){return[!0,!1].includes(e)?e:o}var tt=fe({name:"QPagination",props:{...Ce,modelValue:{type:Number,required:!0},min:{type:[Number,String],default:1},max:{type:[Number,String],required:!0},maxPages:{type:[Number,String],default:0,validator:e=>(typeof e=="string"?parseInt(e,10):e)>=0},inputStyle:[Array,String,Object],inputClass:[Array,String,Object],size:String,disable:Boolean,input:Boolean,iconPrev:String,iconNext:String,iconFirst:String,iconLast:String,toFn:Function,boundaryLinks:{type:Boolean,default:null},boundaryNumbers:{type:Boolean,default:null},directionLinks:{type:Boolean,default:null},ellipses:{type:Boolean,default:null},ripple:{type:[Boolean,Object],default:null},round:Boolean,rounded:Boolean,flat:Boolean,outline:Boolean,unelevated:Boolean,push:Boolean,glossy:Boolean,color:{type:String,default:"primary"},textColor:String,activeDesign:{type:String,default:"",values:e=>e===""||we.includes(e)},activeColor:String,activeTextColor:String,gutter:String,padding:{type:String,default:"3px 2px"}},emits:["update:modelValue"],setup(e,{emit:o}){const{proxy:i}=De(),{$q:c}=i,l=qe(e,c),a=x(()=>parseInt(e.min,10)),r=x(()=>parseInt(e.max,10)),m=x(()=>parseInt(e.maxPages,10)),u=x(()=>H.value+" / "+r.value),d=x(()=>X(e.boundaryLinks,e.input)),v=x(()=>X(e.boundaryNumbers,!e.input)),O=x(()=>X(e.directionLinks,e.input)),F=x(()=>X(e.ellipses,!e.input)),z=xe(null),H=x({get:()=>e.modelValue,set:b=>{if(b=parseInt(b,10),e.disable||isNaN(b))return;const _=Pe(b,a.value,r.value);e.modelValue!==_&&o("update:modelValue",_)}});Ee(()=>`${a.value}|${r.value}`,()=>{H.value=e.modelValue});const oe=x(()=>"q-pagination row no-wrap items-center"+(e.disable===!0?" disabled":"")),J=x(()=>e.gutter in me?`${me[e.gutter]}px`:e.gutter||null),ne=x(()=>J.value!==null?`--q-pagination-gutter-parent:-${J.value};--q-pagination-gutter-child:${J.value}`:null),R=x(()=>{const b=[e.iconFirst||c.iconSet.pagination.first,e.iconPrev||c.iconSet.pagination.prev,e.iconNext||c.iconSet.pagination.next,e.iconLast||c.iconSet.pagination.last];return c.lang.rtl===!0?b.reverse():b}),le=x(()=>({"aria-disabled":e.disable===!0?"true":"false",role:"navigation"})),Z=x(()=>Oe(e,"flat")),ae=x(()=>({[Z.value]:!0,round:e.round,rounded:e.rounded,padding:e.padding,color:e.color,textColor:e.textColor,size:e.size,ripple:e.ripple!==null?e.ripple:!0})),ie=x(()=>{const b={[Z.value]:!1};return e.activeDesign!==""&&(b[e.activeDesign]=!0),b}),y=x(()=>({...ie.value,color:e.activeColor||e.color,textColor:e.activeTextColor||e.textColor})),j=x(()=>{let b=Math.max(m.value,1+(F.value?2:0)+(v.value?2:0));const _={pgFrom:a.value,pgTo:r.value,ellipsesStart:!1,ellipsesEnd:!1,boundaryStart:!1,boundaryEnd:!1,marginalStyle:{minWidth:`${Math.max(2,String(r.value).length)}em`}};return m.value&&b<r.value-a.value+1&&(b=1+Math.floor(b/2)*2,_.pgFrom=Math.max(a.value,Math.min(r.value-b+1,e.modelValue-Math.floor(b/2))),_.pgTo=Math.min(r.value,_.pgFrom+b-1),v.value&&(_.boundaryStart=!0,_.pgFrom++),F.value&&_.pgFrom>a.value+(v.value?1:0)&&(_.ellipsesStart=!0,_.pgFrom++),v.value&&(_.boundaryEnd=!0,_.pgTo--),F.value&&_.pgTo<r.value-(v.value?1:0)&&(_.ellipsesEnd=!0,_.pgTo--)),_});function de(b){H.value=b}function ke(b){H.value=H.value+b}const Se=x(()=>{function b(){H.value=z.value,z.value=null}return{"onUpdate:modelValue":_=>{z.value=_},onKeyup:_=>{Ue(_,13)===!0&&b()},onBlur:b}});function B(b,_,K){const M={"aria-label":_,"aria-current":"false",...ae.value,...b};return K===!0&&Object.assign(M,{"aria-current":"true",...y.value}),_!==void 0&&(e.toFn!==void 0?M.to=e.toFn(_):M.onClick=()=>{de(_)}),P(D,M)}return Object.assign(i,{set:de,setByOffset:ke}),()=>{const b=[],_=[];let K;if(d.value===!0&&(b.push(B({key:"bls",disable:e.disable||e.modelValue<=a.value,icon:R.value[0]},a.value)),_.unshift(B({key:"ble",disable:e.disable||e.modelValue>=r.value,icon:R.value[3]},r.value))),O.value===!0&&(b.push(B({key:"bdp",disable:e.disable||e.modelValue<=a.value,icon:R.value[1]},e.modelValue-1)),_.unshift(B({key:"bdn",disable:e.disable||e.modelValue>=r.value,icon:R.value[2]},e.modelValue+1))),e.input!==!0){K=[];const{pgFrom:M,pgTo:ce,marginalStyle:G}=j.value;if(j.value.boundaryStart===!0){const N=a.value===e.modelValue;b.push(B({key:"bns",style:G,disable:e.disable,label:a.value},a.value,N))}if(j.value.boundaryEnd===!0){const N=r.value===e.modelValue;_.unshift(B({key:"bne",style:G,disable:e.disable,label:r.value},r.value,N))}j.value.ellipsesStart===!0&&b.push(B({key:"bes",style:G,disable:e.disable,label:"\u2026",ripple:!1},M-1)),j.value.ellipsesEnd===!0&&_.unshift(B({key:"bee",style:G,disable:e.disable,label:"\u2026",ripple:!1},ce+1));for(let N=M;N<=ce;N++)K.push(B({key:`bpg${N}`,style:G,disable:e.disable,label:N},N,N===e.modelValue))}return P("div",{class:oe.value,...le.value},[P("div",{class:"q-pagination__content row no-wrap items-center",style:ne.value},[...b,e.input===!0?P(se,{class:"inline",style:{width:`${u.value.length/1.5}em`},type:"number",dense:!0,value:z.value,disable:e.disable,dark:l.value,borderless:!0,inputClass:e.inputClass,inputStyle:e.inputStyle,placeholder:u.value,min:a.value,max:r.value,...Se.value}):P("div",{class:"q-pagination__middle row justify-center"},K),..._])])}}});const ot=["Color","Size","Design","Weight","Material"],nt={props:{productId:{required:!1,type:Number},modelValue:{required:!0,type:Array},creating:{required:!1,type:Boolean,default:!1}},emits:["update:model-value","update:variants"],data(){return{attributesList:ot,attribute:null,attributes:{},values:[],options:this.modelValue,loading:!1}},methods:{...T(W,["removeOption","removeOptionValue"]),...T(Me,{attributeList:"get",attributeShow:"show"}),createValue(e,o,i){console.func("components/product/OptionSection:method.createValue()",arguments);const c=i.values.find(l=>l.name===e);o(c||{name:e},"add-unique")},onChange(e,o){console.func("components/product/OptionSection:method.onChange()",arguments),this.$emit("update:model-value",this.options)},onAddOption(e){console.func("components/product/OptionSection:method.onAddOption()",arguments),this.options.push(e),this.$emit("update:model-value",this.options)},onRemoveOption(e,o){console.func("components/product/OptionSection:method.onRemoveOption()",arguments),this.$core.confirm("Are you sure you want to remove?").then(()=>{this.removeOption({position:e,option:o}).then(()=>{this.options.splice(e,1),this.$emit("update:variants",this.options)}).catch(i=>{this.$core.error(i,{title:"Error"})})})},onAddOptionValue(e,o,i){console.func("components/product/OptionSection:method.onAddOptionValue()",arguments);const c=w.exports.cloneDeep(this.options);c[i].values.push(e),this.$emit("update:variants",c)},onRemoveOptionValue(e,o,i){if(console.func("components/product/OptionSection:method.onRemoveOptionValue()",arguments),!this.hasVariant(i,e.name))return!1;this.removeOptionValue({position:i,value:e.name,option:o}).catch(c=>{this.$core.error(c,{title:"Error"})})},getAttributes(e){console.func("components/product/OptionSection:method.getAttributes()",arguments),this.loading=!0,this.attributeList(e).then(o=>{this.attributes=o,this.loading=!1}).catch(o=>{this.loading=!1,this.$core.error(o,{title:"Error"})})},onLoadAttributes(e){console.func("components/product/OptionSection:method.onLoadAttributes()",arguments),this.getAttributes({})},onLoadAttributeOptions(e,o,i,c){if(console.func("components/product/OptionSection:methods.onLoadAttributeOptions()",arguments),this.values=[],!c.attribute_id){i();return}this.attributeShow(c.attribute_id).then(l=>{o(()=>{const a=e.toLowerCase();this.values=l.values.filter(r=>r.name.toLowerCase().indexOf(a)>-1)})})}},computed:{...ge(W,["hasVariant"])},watch:{modelValue:{deep:!0,handler(e){this.options=e}}}},lt={class:"option-section"},at={class:"flex items-center"},it={class:"row q-col-gutter-sm"},st={class:"col-sm-2 col-xs-12"},ut={class:"col-sm-10 col-xs-12"},rt={class:"q-gutter-sm"};function dt(e,o,i,c,l,a){const r=f("base-label"),m=f("base-btn");return s(),S("div",lt,[(s(!0),S(E,null,$(l.options,(u,d)=>(s(),S("div",{key:d,class:"q-mb-md option"},[g("div",at,[t(r,null,{default:n(()=>[h(k(e.$t("label.option"))+" "+k(d+1),1)]),_:2},1024),t(Le),l.options.length>1?(s(),V(m,{key:0,link:"",class:"q-ml-sm",padding:"0",label:e.$t("label.remove"),onClick:v=>a.onRemoveOption(d,u)},null,8,["label","onClick"])):U("",!0)]),g("div",it,[g("div",st,[t(te,{"options-dense":"",dense:"",outlined:"",modelValue:u.name,"onUpdate:modelValue":v=>u.name=v,"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:l.attributesList,onInputValue:v=>u.name=v,"hide-dropdown-icon":""},null,8,["modelValue","onUpdate:modelValue","options","onInputValue"])]),g("div",ut,[t(te,{"options-dense":"",dense:"",outlined:"",modelValue:u.values,"onUpdate:modelValue":[v=>u.values=v,v=>a.onChange(v,u)],"map-options":"","use-chips":"","use-input":"",multiple:"","hide-dropdown-icon":"","input-debounce":"0","option-label":"name","option-value":"id",onNewValue:(v,O)=>a.createValue(v,O,u),onAdd:({value:v})=>a.onAddOptionValue(v,u,d),onRemove:({value:v})=>a.onRemoveOptionValue(v,u,d),onFilter:(v,O,F)=>a.onLoadAttributeOptions(v,O,F,u),options:l.values,hint:"Separate options with comma"},null,8,["modelValue","onUpdate:modelValue","onNewValue","onAdd","onRemove","onFilter","options"])])]),t(ve,{class:"q-mt-sm"})]))),128)),g("div",rt,[t(D,{"no-caps":"",outline:"",label:e.$t("label.selectOptionsFromAttribue"),color:"primary",loading:l.loading},{default:n(()=>[t(Fe,{fit:"",onBeforeShow:a.onLoadAttributes},{default:n(()=>[l.loading?U("",!0):(s(),V(I,{key:0,dense:"",style:{"min-width":"100px"},class:"q-pa-sm"},{default:n(()=>[(s(!0),S(E,null,$(l.attributes.data,u=>A((s(),V(q,{class:"rounded-borders",onClick:d=>a.onAddOption({id:!1,name:u.name,is_custom:!1,is_variant:!0,attribute_id:u.id,values:[]}),disable:l.options.map(d=>d.attribute_id).includes(u.id),key:u.id,clickable:""},{default:n(()=>[t(p,null,{default:n(()=>[h(k(u.name),1)]),_:2},1024)]),_:2},1032,["onClick","disable"])),[[Ne],[Q]])),128)),l.attributes.meta&&l.attributes.meta.last_page>1?(s(),V(q,{key:0},{default:n(()=>[t(p,{class:"flex-center"},{default:n(()=>[t(tt,{modelValue:l.attributes.meta.current_page,"onUpdate:modelValue":o[0]||(o[0]=u=>l.attributes.meta.current_page=u),max:l.attributes.meta.last_page,input:"",onInput:o[1]||(o[1]=u=>{a.getAttributes({page:u})})},null,8,["modelValue","max"])]),_:1})]),_:1})):U("",!0)]),_:1}))]),_:1},8,["onBeforeShow"])]),_:1},8,["label","loading"]),t(D,{"no-caps":"",outline:"",label:e.$t("label.createCustomOption"),onClick:o[2]||(o[2]=u=>a.onAddOption({id:!1,name:l.attributesList[Math.floor(Math.random()*l.attributesList.length)],is_custom:!0,attribute_id:!1,values:[]}))},null,8,["label"])])])}var ct=L(nt,[["render",dt]]);const mt={props:{modelValue:{}},emits:["update:model-value"],data(){return{options:[]}},methods:{...T(ze,["get"]),onTagLoad(e,o){console.func("components/product/TagsSelect:methods.onTagLoad()",arguments),this.options=[],this.get({filter:e,rowsPerPage:5,sortBy:"name"}).then(({data:i})=>{o(()=>{this.options=i})})},createTag(e,o){if(console.func("components/product/TagsSelect:methods.createTag()",arguments),e.length>0){const i=(this.modelValue||[]).slice();e.split(/[,;|]+/).map(c=>c.trim()).filter(c=>c.length>0).forEach(c=>{i.find(l=>l.name===c)||i.push({name:c})}),o(null),this.$refs.tags.updateInputValue("",!0),this.$emit("update:model-value",i)}},toggleTag(e){console.func("components/product/TagsSelect:methods.toggleTag()",arguments);const o=this.modelValue||[],i=this.$_.findIndex(o,{name:e.name});i>-1?this.removeTag(i):o.push(e),this.$emit("update:model-value",o)},removeTag(e){console.func("components/product/TagsSelect:methods.removeTag()",arguments);const o=this.modelValue||[];o.splice(e,1),this.$emit("update:model-value",o)},onChange(e){console.func("components/product/TagsSelect:methods.onChange()",arguments),this.$emit("update:model-value",e)}}},pt={class:"tags-select"},ht=["innerHTML"],ft={key:0,class:"q-mt-sm"},gt={class:"q-gutter-xs"};function vt(e,o,i,c,l,a){return s(),S("div",pt,[t(te,{"options-dense":"","model-value":i.modelValue,placeholder:"Vintage, cotton, summer",options:l.options,ref:"tags","use-input":"","map-options":"","hide-selected":"","input-debounce":"500",debounce:"500","option-label":"name","option-value":"name",dense:"",outlined:"",multiple:"","use-chips":"","onUpdate:modelValue":a.onChange,onFilter:a.onTagLoad,onNewValue:a.createTag,"display-value":null},{option:n(({itemProps:r,opt:m})=>[t(q,ue(re(r)),{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[g("span",{innerHTML:m.name},null,8,ht)]),_:2},1024)]),_:2},1024),t(p,{side:""},{default:n(()=>[t(he,{dense:"",size:"xs","true-value":1,"false-value":0,"model-value":e.tags.filter(u=>u.name===m.name).length,"onUpdate:modelValue":u=>a.toggleTag(m)},null,8,["model-value","onUpdate:modelValue"])]),_:2},1024)]),_:2},1040)]),_:1},8,["model-value","options","onUpdate:modelValue","onFilter","onNewValue"]),i.modelValue?(s(),S("div",ft,[g("div",gt,[(s(!0),S(E,null,$(i.modelValue,(r,m)=>(s(),V(ye,{square:"",key:m,removable:"",onRemove:u=>a.removeTag(m)},{default:n(()=>[h(k(r.name),1)]),_:2},1032,["onRemove"]))),128))])])):U("",!0)])}var bt=L(mt,[["render",vt]]);const _t=[P("circle",{cx:"15",cy:"15",r:"15"},[P("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"60",cy:"15",r:"9","fill-opacity":".3"},[P("animate",{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"fill-opacity",from:".5",to:".5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"})]),P("circle",{cx:"105",cy:"15",r:"15"},[P("animate",{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}),P("animate",{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"})])];var Vt=fe({name:"QSpinnerDots",props:Te,setup(e){const{cSize:o,classes:i}=$e(e);return()=>P("svg",{class:i.value,fill:"currentColor",width:o.value,height:o.value,viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg"},_t)}});const yt={components:{PricingCard:be,InventoryCard:_e},props:{modelValue:{required:!0,type:Object},creating:{required:!1,type:Boolean,default:!1}},data(){return{variant:w.exports.cloneDeep(this.modelValue)}},emits:["ok","hide"],methods:{show(){console.func("components/product/VariantEditDialog:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/VariantEditDialog:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/VariantEditDialog:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){this.$emit("ok",this.variant),this.hide()},onCancel(){this.hide()}}},kt={class:"q-gutter-sm"};function St(e,o,i,c,l,a){const r=f("pricing-card"),m=f("inventory-card"),u=f("base-dialog");return s(),V(u,{title:`Edit ${l.variant.title}`,"content-style":"width: 800px; max-width: 95vw","body-class":"scroll q-pa-none",ref:"dialog",persistent:"",onHide:a.onDialogHide,"use-separator":""},{body:n(()=>[i.creating?(s(),V(q,{key:0,class:"q-py-md",tag:"label",style:{"min-height":"auto"}},{default:n(()=>[t(p,{style:{"min-width":"auto"},top:"",avatar:""},{default:n(()=>[t(ee,{dense:"",modelValue:l.variant.create_on_save,"onUpdate:modelValue":o[0]||(o[0]=d=>l.variant.create_on_save=d)},null,8,["modelValue"])]),_:1}),t(p,{top:""},{default:n(()=>[t(C,{class:"text-subtitle2"},{default:n(()=>[h(" Create this variant ")]),_:1}),l.variant.create_on_save?U("",!0):(s(),V(C,{key:0,caption:"",lines:"2"},{default:n(()=>[h(" This variant will not be created when you save this product. ")]),_:1}))]),_:1})]),_:1})):U("",!0),i.creating&&l.variant.create_on_save||!i.creating?(s(),S(E,{key:1},[t(r,{flat:"",modelValue:l.variant,"onUpdate:modelValue":o[1]||(o[1]=d=>l.variant=d),title:""},null,8,["modelValue"]),t(ve),t(m,{flat:"",modelValue:l.variant,"onUpdate:modelValue":o[2]||(o[2]=d=>l.variant=d)},null,8,["modelValue"])],64)):U("",!0)]),footer:n(()=>[t(Y,{class:"text-right"},{default:n(()=>[g("div",kt,[t(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey",onClick:a.onCancel},null,8,["label","onClick"]),t(D,{"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["label","onClick"])])]),_:1})]),_:1},8,["title","onHide"])}var Ct=L(yt,[["render",St]]);const wt={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue),money:{decimal:".",separator:",",prefix:"$ ",precision:2,minimumFractionDigits:2,masked:!1,nullValue:0},price:0}},emits:["ok","hide"],methods:{show(){console.func("components/product/EditPrices:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/EditPrices:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditPrices:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditPrices:methods.onDone()",arguments),this.$emit("ok",this.variants),this.hide()},onChange(){console.func("components/product/EditPrices:methods.onChange()",arguments),this.variants=this.variants.map(e=>({...e,price:this.price}))}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},qt={class:"col"},xt={class:"col-auto q-ml-sm"},Et={class:"q-gutter-sm"};function Dt(e,o,i,c,l,a){const r=f("base-price-input"),m=f("base-dialog");return s(),V(m,{title:"Edit prices",ref:"dialog","body-class":"scroll",persistent:"","use-separator":"",onHide:a.onDialogHide},{body:n(()=>[t(I,{class:"bordered"},{default:n(()=>[t(q,{class:"q-pl-none q-pr-none"},{default:n(()=>[t(p,null,{default:n(()=>[t(C,{class:""},{default:n(()=>[h("Apply a price to all variants")]),_:1}),t(C,{class:"row"},{default:n(()=>[g("div",qt,[t(r,{dense:"",outlined:"",modelValue:l.price,"onUpdate:modelValue":o[0]||(o[0]=u=>l.price=u)},null,8,["modelValue"])]),g("div",xt,[t(D,{"no-caps":"",outline:"",padding:"10px 15px",color:"grey",class:"bg-green-1",label:e.$t("label.applyToAll"),onClick:a.onChange},null,8,["label","onClick"])])]),_:1})]),_:1})]),_:1}),(s(!0),S(E,null,$(l.variants,(u,d)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:d},{default:n(()=>[t(p,{class:"text-bold"},{default:n(()=>[t(C,null,{default:n(()=>[h(k(u.title),1)]),_:2},1024)]),_:2},1024),t(p,{side:"",class:"align-right"},{default:n(()=>[t(r,{dense:"",outlined:"",modelValue:u.price,"onUpdate:modelValue":v=>u.price=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),footer:n(()=>[t(Y,{class:"text-right"},{default:n(()=>[g("div",Et,[A(t(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[Q]]),t(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var Pt=L(wt,[["render",Dt]]);const Ot={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue),quantity:0,locations:[],location:null,inventories:[]}},emits:["ok","hide"],methods:{...T(Ve,["get"]),show(){console.func("components/product/EditQuantity:methods.show()",arguments),this.get().then(({data:e})=>{this.locations=e,this.$refs.dialog.show()}).catch(e=>{this.$core.error(e,{title:"Error"})})},hide(){console.func("components/product/EditQuantity:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditQuantity:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditQuantity:methods.onDone()",arguments),this.inventories.forEach(e=>{const o=this.variants.find(i=>i.id===e.variant.id);o&&(o.inventories.find(i=>i.location.id===e.location.location.id).available=e.location.available)}),this.$emit("ok",this.variants),this.hide()},onChange(){console.func("components/product/EditQuantity:methods.onChange()",arguments),this.inventories.forEach(e=>{e.location.available=this.quantity})},onSelect(e){console.func("components/product/EditQuantity:methods.onSelect()",arguments),this.variants.forEach(o=>{this.inventories.push({variant:o,location:o.inventories.find(i=>i.location.id===e.id)})}),this.location=e}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},Ut={class:"text-weight-bold"},Lt={class:"col"},Nt={class:"col-auto q-ml-sm"},Tt={class:"q-gutter-sm"};function $t(e,o,i,c,l,a){const r=f("base-dialog");return s(),V(r,{title:"Edit quantities",ref:"dialog","body-class":"scroll",persistent:"",onHide:a.onDialogHide,"use-separator":""},{body:n(()=>[t(I,{class:"bordered"},{default:n(()=>[l.location?(s(),S(E,{key:1},[t(q,{class:"q-pt-none q-pl-none q-pr-none"},{default:n(()=>[t(p,null,{default:n(()=>[t(C,{class:"q-mb-sm"},{default:n(()=>[h("Editing quantities at "),g("span",Ut,k(l.location.name),1),h(".")]),_:1}),t(C,{class:""},{default:n(()=>[h(" Apply a quantity to all variants ")]),_:1}),t(C,{class:"row"},{default:n(()=>[g("div",Lt,[t(se,{dense:"",outlined:"",modelValue:l.quantity,"onUpdate:modelValue":o[0]||(o[0]=m=>l.quantity=m),type:"number"},null,8,["modelValue"])]),g("div",Nt,[t(D,{"no-caps":"",outline:"",padding:"8px 15px",color:"grey",class:"bg-green-1",label:e.$t("label.applyToAll"),onClick:a.onChange},null,8,["label","onClick"])])]),_:1})]),_:1})]),_:1}),(s(!0),S(E,null,$(l.inventories,(m,u)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:u},{default:n(()=>[t(p,{class:"text-bold"},{default:n(()=>[t(C,null,{default:n(()=>[h(k(m.variant.title),1)]),_:2},1024)]),_:2},1024),t(p,{side:"",class:"align-right"},{default:n(()=>[t(se,{dense:"",outlined:"",modelValue:m.location.available,"onUpdate:modelValue":d=>m.location.available=d,type:"number"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))],64)):(s(),S(E,{key:0},[t(q,{dense:"",class:"q-pt-none q-pl-none q-pr-none"},{default:n(()=>[t(p,null,{default:n(()=>[t(C,{class:""},{default:n(()=>[h(" Choose a location where you want to edit quantities. ")]),_:1})]),_:1})]),_:1}),(s(!0),S(E,null,$(l.locations,(m,u)=>(s(),V(q,{clickable:"",key:u,onClick:d=>a.onSelect(m)},{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[h(k(m.name),1)]),_:2},1024)]),_:2},1024),t(p,{side:""},{default:n(()=>[t(Be,{name:"fal fa-angle-right"})]),_:1})]),_:2},1032,["onClick"]))),128))],64))]),_:1})]),footer:n(()=>[t(Y,{class:"text-right"},{default:n(()=>[g("div",Tt,[A(t(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[Q]]),t(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var Bt=L(Ot,[["render",$t]]);const At={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue)}},emits:["ok","hide"],methods:{show(){console.func("components/product/EditSkus:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/EditSkus:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditSkus:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditSkus:methods.onDone()",arguments),this.$emit("ok",this.variants),this.hide()}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},Qt={class:"q-gutter-sm"};function Ht(e,o,i,c,l,a){const r=f("base-input"),m=f("base-dialog");return s(),V(m,{title:"Edit SKUs ",ref:"dialog","body-class":"scroll","use-separator":"",persistent:"",onHide:a.onDialogHide},{body:n(()=>[t(I,{class:"bordered"},{default:n(()=>[(s(!0),S(E,null,$(l.variants,(u,d)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:d},{default:n(()=>[t(p,{class:"text-bold"},{default:n(()=>[t(C,null,{default:n(()=>[h(k(u.title),1)]),_:2},1024)]),_:2},1024),t(p,{side:"",class:"align-right"},{default:n(()=>[t(r,{dense:"",outlined:"",modelValue:u.sku,"onUpdate:modelValue":v=>u.sku=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),footer:n(()=>[t(Y,{class:"text-right"},{default:n(()=>[g("div",Qt,[A(t(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[Q]]),t(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var It=L(At,[["render",Ht]]);const Ft={props:{modelValue:{required:!0,type:Array}},data(){return{variants:w.exports.cloneDeep(this.modelValue),default:w.exports.cloneDeep(this.modelValue)}},emits:["ok","hide"],methods:{show(){console.func("components/product/EditBarcodes:methods.show()",arguments),this.$refs.dialog.show()},hide(){console.func("components/product/EditBarcodes:methods.close()",arguments),this.$refs.dialog.hide()},onDialogHide(){console.func("components/product/EditBarcodes:methods.onDialogHide()",arguments),this.$emit("hide")},onDone(){console.func("components/product/EditBarcodes:methods.onDone()",arguments),this.$emit("ok",this.variants),this.hide()}},computed:{disable(){return JSON.stringify(this.variants)===JSON.stringify(this.default)}}},Mt={class:"q-gutter-sm"};function zt(e,o,i,c,l,a){const r=f("base-input"),m=f("base-dialog");return s(),V(m,{title:"Edit barcodes","body-class":"scroll",ref:"dialog",persistent:"",onHide:a.onDialogHide,"use-separator":""},{body:n(()=>[t(I,{class:"bordered"},{default:n(()=>[(s(!0),S(E,null,$(l.variants,(u,d)=>(s(),V(q,{class:"q-pl-none q-pr-none",key:d},{default:n(()=>[t(p,{class:"text-bold"},{default:n(()=>[t(C,null,{default:n(()=>[h(k(u.title),1)]),_:2},1024)]),_:2},1024),t(p,{side:"",class:"align-right"},{default:n(()=>[t(r,{dense:"",outlined:"",modelValue:u.barcode,"onUpdate:modelValue":v=>u.barcode=v},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),footer:n(()=>[t(Y,{class:"text-right"},{default:n(()=>[g("div",Mt,[A(t(D,{"no-caps":"",outline:"",label:e.$t("label.cancel"),color:"grey"},null,8,["label"]),[[Q]]),t(D,{disable:a.disable,"no-caps":"",label:e.$t("label.done"),color:"primary",onClick:a.onDone},null,8,["disable","label","onClick"])])]),_:1})]),_:1},8,["onHide"])}var Rt=L(Ft,[["render",zt]]);const Jt={props:{inventories:{required:!0,type:Array},track_inventory:{required:!0,type:Boolean,default:!1}},computed:{available(){return this.activeLocation.length?this.activeLocation.map(e=>parseInt(e.available)).reduce((e,o)=>e+o):0},activeLocation(){return this.inventories.filter(e=>e.active)}}};function jt(e,o,i,c,l,a){return s(),V(C,null,{default:n(()=>[i.track_inventory?(s(),S(E,{key:0},[h(k(a.available)+" available at "+k(a.activeLocation.length)+" locations ",1)],64)):(s(),S(E,{key:1},[h("Stocked at "+k(a.activeLocation.length)+" locations",1)],64))]),_:1})}var Kt=L(Jt,[["render",jt]]);const Gt={components:{InventoryLabel:Kt,FileSelector:Je},props:{modelValue:{required:!0},product:{required:!1,type:Object},creating:{required:!1,type:Boolean,default:!1},editing:{required:!1,type:Boolean,default:!1}},data(){return{selected:[],loading:!0,selection:!1}},emits:["update:model-value"],methods:{...T(W,["get","edit","changeList","clear"]),onLoad(){console.func("components/product/VariantsSection:method.onLoad()",arguments),this.product.id?this.get({product_id:this.product.id}).then(()=>{this.loading=!1}).catch(e=>{this.loading=!1,this.$core.error(e,{title:"Error"})}):this.loading=!1},onEditVariant(e){console.func("components/product/VariantsSection:method.onEditVariant()",arguments),this.creating||this.hasNewVariant||this.editing?this.$q.dialog({component:Ct,componentProps:{modelValue:e,creating:this.creating||isNaN(e.id)}}).onOk(o=>{console.func("components/product/VariantsSection:methods.onEditVariant.onOk()",arguments),this.edit(o).then(()=>{this.$emit("update:model-value",this.variants)})}):this.$router.push({name:"Products Variant",params:{product_id:this.product.id,variant_id:e.id}})},onUpdateThumbnail(e,o){console.func("components/product/VariantsSection:method.onUpdateThumbnail()",arguments);const i=w.exports.cloneDeep(o);this.edit(Object.assign(i,{thumbnail:e})).then(()=>{this.$emit("update:model-value",this.variants)})},onEditPrices(){console.func("components/product/VariantsSection:method.onEditPrices()",arguments),this.$q.dialog({component:Pt,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(o=>{this.$emit("update:model-value",w.exports.cloneDeep(o)),this.loading=!1})})},onEditQuantities(){console.func("components/product/VariantsSection:method.onEditQuantities()",arguments),this.$q.dialog({component:Bt,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(o=>{this.$emit("update:model-value",w.exports.cloneDeep(o)),this.loading=!1})})},onEditSKUs(){console.func("components/product/VariantsSection:method.onEditSKUs()",arguments),this.$q.dialog({component:It,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(o=>{this.$emit("update:model-value",w.exports.cloneDeep(o)),this.loading=!1})})},onEditBarcode(){console.func("components/product/VariantsSection:method.onEditBarcode()",arguments),this.$q.dialog({component:Rt,componentProps:{modelValue:this.modelValue}}).onOk(e=>{this.loading=!0,this.changeList(e).then(o=>{this.$emit("update:model-value",w.exports.cloneDeep(o)),this.loading=!1})})},onSelect(){this.selected.length&&this.selected.length<this.variants.length?this.variants.filter(e=>!this.selected.includes(e.id)).forEach(e=>{this.selected.push(e.id)}):this.selected.length===this.variants.length?this.selected=[]:this.selected=this.variants.map(e=>e.id)}},computed:{...ge(W,{variants:"rows",default:"default"}),hasNewVariant(){return this.variants.filter(e=>isNaN(e.id)).length>0},length(){return this.selected.length||this.variants.length},inventoriesAvailable(){const e=[];return this.variants.filter(o=>o.track_inventory).forEach(o=>{e.push(o.inventories.filter(i=>i.trackable).map(i=>parseInt(i.available)).reduce((i,c)=>i+c,0))}),`${e.reduce((o,i)=>o+parseInt(i),0)} available`},hasTrackInventory(){return this.variants.filter(e=>e.track_inventory).length}},watch:{selected(e){e.length&&e.length<this.variants.length?this.selection=null:e.length===this.variants.length?this.selection=!0:this.selection=!1},variants(e){this.$emit("update:model-value",e)}},mounted(){setTimeout(()=>{this.clear(this.modelValue),this.loading=!1},100)},unmounted(){this.clear([])}},Wt={class:"variants-section"},Yt={key:1,class:"row justify-center q-my-md"},Zt={key:0};function Xt(e,o,i,c,l,a){const r=f("base-btn-dropdown"),m=f("file-selector"),u=f("inventory-label");return s(),S("div",Wt,[t(I,{class:"bordered"},{default:n(()=>[e.variants.length?(s(),V(q,{key:0},{default:n(()=>[t(p,{style:{"min-width":"auto"},avatar:""},{default:n(()=>[t(ee,{size:"sm",dense:"","onUpdate:modelValue":[a.onSelect,o[0]||(o[0]=d=>l.selection=d)],modelValue:l.selection},null,8,["onUpdate:modelValue","modelValue"])]),_:1}),t(p,null,{default:n(()=>[t(C,{class:"text-weight-bold"},{default:n(()=>[h(k(l.selected.length?"Selected":"Total")+" "+k(a.length)+" variant"+k(a.length>1?"s":""),1)]),_:1})]),_:1}),t(p,{side:""},{default:n(()=>[t(r,{label:e.$t("label.actions"),link:"",color:"primary"},{default:n(()=>[t(I,{dense:"",style:{"min-width":"150px"},class:"q-pa-sm"},{default:n(()=>[A((s(),V(q,{class:"rounded-borders",onClick:a.onEditPrices,clickable:""},{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[h("Edit prices")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]]),A((s(),V(q,{class:"rounded-borders",onClick:a.onEditQuantities,clickable:""},{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[h("Edit quantities")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]]),A((s(),V(q,{class:"rounded-borders",onClick:a.onEditSKUs,clickable:""},{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[h("Edit SKUs")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]]),A((s(),V(q,{class:"rounded-borders",onClick:a.onEditBarcode,clickable:""},{default:n(()=>[t(p,null,{default:n(()=>[t(C,null,{default:n(()=>[h("Edit barcodes")]),_:1})]),_:1})]),_:1},8,["onClick"])),[[Q]])]),_:1})]),_:1},8,["label"])]),_:1})]),_:1})):U("",!0),l.loading?(s(),S("div",Yt,[t(Vt,{color:"primary",size:"40px"})])):(s(!0),S(E,{key:2},$(i.modelValue,(d,v)=>(s(),V(q,{clickable:"",key:v},{default:n(()=>[t(p,{style:{"min-width":"auto"},avatar:""},{default:n(()=>[t(ee,{size:"sm",dense:"",modelValue:l.selected,"onUpdate:modelValue":o[1]||(o[1]=O=>l.selected=O),val:d.id},null,8,["modelValue","val"])]),_:2},1024),t(p,{avatar:""},{default:n(()=>[t(m,{mini:"","dialog-label":"uploadThumbnail",hint:"You can only choose images as variant media",icon:"fad fa-image","related-files":i.product.media,modelValue:d.thumbnail,"onUpdate:modelValue":O=>a.onUpdateThumbnail(O,d)},null,8,["related-files","modelValue","onUpdate:modelValue"])]),_:2},1024),t(p,{onClick:O=>a.onEditVariant(d),class:"text-bold"},{default:n(()=>[t(C,null,{default:n(()=>[h(k(d.title)+" ",1),isNaN(d.id)?(s(),V(ye,{key:0,size:"sm",color:"green-2",label:e.$t("label.new")},null,8,["label"])):U("",!0)]),_:2},1024)]),_:2},1032,["onClick"]),t(p,{onClick:O=>a.onEditVariant(d),side:"",class:"align-right"},{default:n(()=>[i.creating&&!d.create_on_save?(s(),S("span",Zt,"This version will not be created")):(s(),S(E,{key:1},[t(C,null,{default:n(()=>[h("$"+k(d.price),1)]),_:2},1024),t(u,ue(re(d)),null,16)],64))]),_:2},1032,["onClick"])]),_:2},1024))),128)),a.hasTrackInventory?(s(),V(q,{key:3,dense:"",class:"q-pt-none"},{default:n(()=>[t(p,null,{default:n(()=>[h("Total inventory at all locations")]),_:1}),t(p,{side:"",class:"align-right"},{default:n(()=>[t(C,null,{default:n(()=>[h(k(a.inventoriesAvailable),1)]),_:1})]),_:1})]),_:1})):U("",!0)]),_:1})])}var eo=L(Gt,[["render",Xt]]);const to={props:{modelValue:{}},emits:["update:model-value"],methods:{...T(Re,["get"]),onChange(e){this.$emit("update:model-value",e)},onNewValue(e,o){o({name:e},"add-unique")}}};function oo(e,o,i,c,l,a){const r=f("base-select");return s(),V(r,{dense:"",outlined:"","map-options":"","use-input":"","input-debounce":"500",debounce:"500","option-label":"name","option-value":"id",class:"vendor-select","hide-no-option":"",placeholder:i.modelValue?"":"e.g. Lotto","model-value":i.modelValue,"onUpdate:modelValue":a.onChange,"filter-method":e.get,onNewValue:a.onNewValue},null,8,["placeholder","model-value","onUpdate:modelValue","filter-method","onNewValue"])}var no=L(to,[["render",oo]]);const pe={description:"",status:"Draft",inventories_available:"0 available",default_variant:{taxable:!1,track_inventory:!1,out_of_stock_track_inventory:!1,inventories:[],price:"0.00",compare_at_price:"0.00",cost_per_item:"0.00"},has_variant:!1,media:[],options:[{id:!1,name:"Size",is_custom:!0,attribute_id:!1,values:[]}]},lo={components:{OptionSection:ct,VariantsSection:eo,InventorySection:_e,PricingSection:be,VendorSelect:no,CategorySelect:He,TagsSelect:bt,CollectionsSelect:et,SeoSection:Ke,SkeletonSinglePage:je},data(){return{loaded:!1,submited:!1,default:w.exports.cloneDeep(pe),product:w.exports.cloneDeep(pe),options:[]}},methods:{...T(Qe,["show","store","update"]),...T(W,["clear","generate"]),...T(Ve,{location:"get"}),onSubmit(e){console.func("pages/admins/products/ProductPage:methods.onSubmit()",arguments),this.submited=!0,(this.creating?this.store:this.update)(this.product).then(({data:i,message:c})=>{this.submited=!1,this.$q.notify(c),this.product=i,this.default=w.exports.cloneDeep(i),this.clear(i.variants),this.$router.push({name:"Single Product",params:{id:i.id},query:{action:"edit"}})}).catch(i=>{this.submited=!1,this.$core.error(i,{title:"Error"})})},onReset(e){console.func("pages/admins/products/ProductPage:methods.onReset()",arguments),this.loaded=!1,setTimeout(()=>{this.product=w.exports.cloneDeep(this.default),this.loaded=!0},1)},onCancel(e){console.func("pages/admins/products/ProductPage:methods.onCancel()",arguments),this.$router.back()},onGenerateVariant(e){console.func("pages/admins/products/ProductPage:methods.onGenerateVariant()",arguments),this.generate({options:e,default_variant:this.product.default_variant})},onChangeVariant(e){console.func("pages/admins/products/ProductPage:methods.onChangeVariant()",arguments),this.clear([]),this.product.options=[],this.product.variants=[]},onLoadLoaction(){this.location().then(({data:e})=>{e.forEach(o=>{this.product.default_variant.inventories.push({id:!1,available:0,incoming:0,active:!0,location:{id:o.id,name:o.name}})})}).then(()=>{this.default=w.exports.cloneDeep(this.product),this.loaded=!0}).catch(e=>{this.loaded=!0,this.$core.error(e,{title:"Error"})})}},mounted(){this.creating?this.onLoadLoaction():this.show(this.id).then(e=>{this.product=e,this.default=w.exports.cloneDeep(e),this.loaded=!0}).catch(e=>{this.$emit("error",e)})},computed:{creating(){return this.id==="add"},id(){return this.$route.params.id},action(){return this.$route.query.action},slot(){return this.options.length?"before-options":"no-option"},disable(){return this.default&&JSON.stringify(this.product)===JSON.stringify(this.default)},resetable(){return this.default&&JSON.stringify(this.product)!==JSON.stringify(this.default)}}},ao={class:"row q-col-gutter-md"},io={class:"col-xs-12 col-sm-9"},so={class:"q-gutter-md"},uo={class:"col-xs-12"},ro={class:"col-xs-12"},co={class:"col-xs-12"},mo={class:"col-xs-12"},po={class:"col-xs-12"},ho={class:"col-xs-12 col-sm-3"},fo={class:"q-gutter-y-md"};function go(e,o,i,c,l,a){const r=f("base-label"),m=f("base-input"),u=f("base-editor"),d=f("base-section"),v=f("base-dropzone"),O=f("pricing-section"),F=f("inventory-section"),z=f("option-section"),H=f("variants-section"),oe=f("seo-section"),J=f("base-select"),ne=f("vendor-select"),R=f("category-select"),le=f("tags-select"),Z=f("collections-select"),ae=f("base-form"),ie=f("skeleton-single-page");return s(),V(Ae,{padding:""},{default:n(()=>[l.loaded?(s(),V(ae,{key:0,onSubmit:a.onSubmit,onCancel:a.onCancel,onReset:a.onReset,resetable:a.resetable,disable:a.disable,submited:l.submited},{default:n(()=>[g("div",ao,[g("div",io,[g("div",so,[t(d,{title:"General information",description:"A great product title and description has the power to turn a casual shopper into a revenue-generating buyer."},{default:n(()=>[g("div",uo,[t(r,null,{default:n(()=>[h(k(e.$t("label.title")),1)]),_:1}),t(m,{dense:"",outlined:"",modelValue:l.product.title,"onUpdate:modelValue":o[0]||(o[0]=y=>l.product.title=y)},null,8,["modelValue"])]),g("div",ro,[t(r,null,{default:n(()=>[h(k(e.$t("label.description")),1)]),_:1}),t(u,{modelValue:l.product.description,"onUpdate:modelValue":o[1]||(o[1]=y=>l.product.description=y),"min-height":"10rem"},null,8,["modelValue"])])]),_:1}),t(d,{"no-row":""},{default:n(()=>[t(v,{header:"",editor:"",hint:"Product media can include images, 3D models and videos. Using media like 3D models for your products provides your customer with a better understanding of the function and size of an item, and increases your customers' confidence in the quality of your products.",accept:"image/*",modelValue:l.product.media,"onUpdate:modelValue":o[2]||(o[2]=y=>l.product.media=y)},null,8,["modelValue"])]),_:1}),!l.product.has_variant||a.creating?(s(),S(E,{key:0},[t(O,{modelValue:l.product.default_variant,"onUpdate:modelValue":o[3]||(o[3]=y=>l.product.default_variant=y)},null,8,["modelValue"]),t(F,{creating:a.creating,modelValue:l.product.default_variant,"onUpdate:modelValue":o[4]||(o[4]=y=>l.product.default_variant=y)},null,8,["creating","modelValue"])],64)):U("",!0),t(d,{title:"Variants"},{default:n(()=>[g("div",co,[t(ee,{size:"sm",dense:"",modelValue:l.product.has_variant,"onUpdate:modelValue":[o[5]||(o[5]=y=>l.product.has_variant=y),a.onChangeVariant],label:e.$t("label.thisProductHasMultipleOptionsLikeDifferentSizesOrColors")},null,8,["modelValue","onUpdate:modelValue","label"])]),l.product.has_variant?(s(),S(E,{key:0},[g("div",mo,[t(z,{creating:a.creating,modelValue:l.product.options,"onUpdate:modelValue":o[6]||(o[6]=y=>l.product.options=y),"product-id":l.product.id,"onUpdate:variants":a.onGenerateVariant},null,8,["creating","modelValue","product-id","onUpdate:variants"])]),g("div",po,[t(H,{creating:a.creating,editing:a.resetable,ref:"variants",product:l.product,modelValue:l.product.variants,"onUpdate:modelValue":o[7]||(o[7]=y=>l.product.variants=y)},null,8,["creating","editing","product","modelValue"])])],64)):U("",!0)]),_:1}),t(oe,{modelValue:l.product,"onUpdate:modelValue":o[8]||(o[8]=y=>l.product=y)},null,8,["modelValue"])])]),g("div",ho,[t(d,{"no-row":""},{default:n(()=>[g("div",fo,[g("div",null,[t(r,null,{default:n(()=>[h(k(e.$t("label.productStatus")),1)]),_:1}),t(J,{modelValue:l.product.status,"onUpdate:modelValue":o[9]||(o[9]=y=>l.product.status=y),options:["Active","Draft"],dense:"",outlined:""},null,8,["modelValue"])]),g("div",null,[t(r,null,{default:n(()=>[h(k(e.$t("label.vendor")),1)]),_:1}),t(ne,{modelValue:l.product.vendor,"onUpdate:modelValue":o[10]||(o[10]=y=>l.product.vendor=y)},null,8,["modelValue"])]),g("div",null,[t(r,null,{default:n(()=>[h(k(e.$t("label.category")),1)]),_:1}),t(R,{modelValue:l.product.category,"onUpdate:modelValue":o[11]||(o[11]=y=>l.product.category=y)},null,8,["modelValue"])]),g("div",null,[t(r,null,{default:n(()=>[h(k(e.$t("label.tags")),1)]),_:1}),t(le,{modelValue:l.product.tags,"onUpdate:modelValue":o[12]||(o[12]=y=>l.product.tags=y)},null,8,["modelValue"])]),g("div",null,[t(r,null,{default:n(()=>[h(k(e.$t("label.collections")),1)]),_:1}),t(Z,{modelValue:l.product.collections,"onUpdate:modelValue":o[13]||(o[13]=y=>l.product.collections=y)},null,8,["modelValue"])])])]),_:1})])])]),_:1},8,["onSubmit","onCancel","onReset","resetable","disable","submited"])):(s(),V(ie,{key:1}))]),_:1})}var jo=L(lo,[["render",go]]);export{jo as default};
